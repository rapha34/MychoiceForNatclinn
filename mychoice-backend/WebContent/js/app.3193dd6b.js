(function(){var e={5614:function(e,t,r){"use strict";var a=r(3751),n=r(641),l=r(33);const s={class:""},o=["innerHTML"];function i(e,t,r,a,i,c){const u=(0,n.g2)("AppBar"),d=(0,n.g2)("Drawer"),p=(0,n.g2)("router-view"),m=(0,n.g2)("v-main"),h=(0,n.g2)("v-icon"),v=(0,n.g2)("v-card-title"),f=(0,n.g2)("OpenDialog"),g=(0,n.g2)("v-card-text"),b=(0,n.g2)("v-card"),y=(0,n.g2)("v-dialog"),k=(0,n.g2)("About"),E=(0,n.g2)("v-progress-circular"),S=(0,n.g2)("v-overlay"),_=(0,n.g2)("v-btn"),C=(0,n.g2)("v-snackbar"),F=(0,n.g2)("v-app");return(0,n.uX)(),(0,n.Wv)(F,{style:{"background-color":"#fafafa"}},{default:(0,n.k6)((()=>[(0,n.bF)(u),(0,n.bF)(d),(0,n.Lk)("input",{style:{display:"none"},ref:"dropFileInputRef",accept:".xlsx",type:"file",onChange:t[0]||(t[0]=(...t)=>e.onFileChange&&e.onFileChange(...t))},null,544),(0,n.bF)(m,null,{default:(0,n.k6)((()=>[(0,n.bF)(p)])),_:1}),(0,n.bF)(y,{modelValue:e.state.openDialog,"onUpdate:modelValue":t[1]||(t[1]=t=>e.state.openDialog=t),"max-width":"600px"},{default:(0,n.k6)((()=>[(0,n.bF)(b,null,{default:(0,n.k6)((()=>[(0,n.bF)(v,null,{default:(0,n.k6)((()=>[(0,n.Lk)("span",s,[(0,n.bF)(h,{class:"mr-2"},{default:(0,n.k6)((()=>t[6]||(t[6]=[(0,n.eW)("mdi-cloud-upload")]))),_:1}),t[7]||(t[7]=(0,n.eW)("Open online project "))])])),_:1}),(0,n.bF)(g,null,{default:(0,n.k6)((()=>[(0,n.bF)(f)])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,n.bF)(y,{modelValue:e.state.aboutDialog,"onUpdate:modelValue":t[2]||(t[2]=t=>e.state.aboutDialog=t),"max-width":"600px"},{default:(0,n.k6)((()=>[(0,n.bF)(k)])),_:1},8,["modelValue"]),(0,n.bF)(S,{"z-index":"3",value:e.state.overlay},{default:(0,n.k6)((()=>[(0,n.bF)(E,{indeterminate:"",size:"64"})])),_:1},8,["value"]),(0,n.bF)(C,{top:"",color:"info",modelValue:e.isNotification,"onUpdate:modelValue":t[3]||(t[3]=t=>e.isNotification=t)},{default:(0,n.k6)((()=>[(0,n.bF)(h,{"align-center":""},{default:(0,n.k6)((()=>t[8]||(t[8]=[(0,n.eW)("mdi-information")]))),_:1}),t[10]||(t[10]=(0,n.eW)("  ")),(0,n.Lk)("div",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.notifications,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t},(0,l.v_)(e.message)+". ",1)))),128))]),(0,n.bF)(_,{class:"ml-3",color:"white",small:"",outlined:"",onClick:e.refreshProject},{default:(0,n.k6)((()=>t[9]||(t[9]=[(0,n.eW)(" Refresh ")]))),_:1},8,["onClick"])])),_:1},8,["modelValue"]),(0,n.bF)(C,{color:"red",modelValue:e.isError,"onUpdate:modelValue":t[5]||(t[5]=t=>e.isError=t),timeout:0},{default:(0,n.k6)((()=>[(0,n.Lk)("div",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.getErrors,((r,a)=>((0,n.uX)(),(0,n.CE)("div",{key:a},[(0,n.Lk)("span",{innerHTML:e.getErrorMessage(r)},null,8,o),t[11]||(t[11]=(0,n.eW)(". "))])))),128))]),(0,n.bF)(_,{text:"",onClick:t[4]||(t[4]=t=>e.clearErrors())},{default:(0,n.k6)((()=>t[12]||(t[12]=[(0,n.eW)("Close")]))),_:1})])),_:1},8,["modelValue"])])),_:1})}r(8111),r(3579);const c=["title"],u={class:"d-flex"},d=["src"],p={class:"logo-inrae"},m=["src"];function h(e,t,r,s,o,i){const h=(0,n.g2)("v-app-bar-nav-icon"),v=(0,n.g2)("v-icon"),f=(0,n.g2)("v-btn"),g=(0,n.g2)("v-tooltip"),b=(0,n.g2)("v-toolbar-title"),y=(0,n.g2)("router-link"),k=(0,n.g2)("v-spacer"),E=(0,n.g2)("v-app-bar");return(0,n.uX)(),(0,n.Wv)(E,{elevation:"0",color:"secondary",dark:"",app:""},{default:(0,n.k6)((()=>[(0,n.bF)(h,{onClick:t[0]||(t[0]=(0,a.D$)((t=>e.state.drawer=!e.state.drawer),["stop"]))}),(0,n.bF)(b,{class:"d-flex align-center",style:{width:"calc(50% - 2px - 20px - (48px - 12px) - (132px / 2) - 48px)","margin-right":"48px"}},{default:(0,n.k6)((()=>[e.state.project&&i.isProjectRoute?((0,n.uX)(),(0,n.CE)("a",{key:0,style:{"text-overflow":"ellipsis",display:"block",overflow:"hidden"},class:"white--text",title:e.state.project.name,onClick:t[1]||(t[1]=e=>i.switchToView("project"))},(0,l.v_)(e.state.project.name),9,c)):(0,n.Q3)("",!0),e.state.project&&i.isProjectRoute&&e.state.spreadsheet?((0,n.uX)(),(0,n.Wv)(g,{key:1,bottom:""},{activator:(0,n.k6)((({on:r})=>[(0,n.bF)(f,{icon:"",target:"_blank",href:`${i.getSpreadsheetLink(e.state.spreadsheet)}`},{default:(0,n.k6)((()=>[(0,n.bF)(v,(0,n.v6)((0,n.Tb)(r),{title:""}),{default:(0,n.k6)((()=>t[2]||(t[2]=[(0,n.eW)("mdi-google-spreadsheet")]))),_:2},1040)])),_:2},1032,["href"])])),default:(0,n.k6)((()=>[t[3]||(t[3]=(0,n.Lk)("span",null,"Open Spreadsheet",-1))])),_:1})):(0,n.Q3)("",!0)])),_:1}),(0,n.Lk)("div",u,[(0,n.bF)(y,{to:"/",class:"logo-mychoice"},{default:(0,n.k6)((()=>[(0,n.Lk)("img",{src:e.state.baseUrl+"logo-mychoice.svg"},null,8,d)])),_:1})]),(0,n.bF)(k,{class:"flex-grow-1"}),(0,n.Lk)("div",p,[(0,n.Lk)("img",{src:e.state.baseUrl+"logo-inrae-white-transparent.png"},null,8,m)])])),_:1})}r(4114),r(7588),r(2489);var v=r(953);const f={mode:"consensus",globalCardType:"label",searchInput:"",selectedSuperset:"",selectedSupersets:[],selectedAims:[],selectedCriterions:[],selectedStakeholders:[],compareDialog:!1,dialog:!1,openDialog:!1,spreadsheet:null,selectedView:"table-view",data:null,project:null,aboutDialog:!1,creditsDialog:!1},g=(0,v.KR)(null),b=(0,v.Kh)({vm:null,notifications:[],baseUrl:"/",selectedView:f.selectedView,spreadsheet:f.spreadsheet,data:f.data,project:f.project,searchInput:f.searchInput,selectedSuperset:f.selectedSuperset,selectedSupersets:f.selectedSupersets,selectedAims:f.selectedAims,selectedCriterions:f.selectedCriterions,selectedStakeholders:f.selectedStakeholders,mode:f.mode,modes:{consensus:{name:"Consensus"},interplay:{name:"Interplay"},prospective:{name:"Prospective"},expertise:{name:"Expertise"},"data-reliability":{name:"Data reliability"},"multi-stakeholder":{name:"Multi Stakeholder"}},globalCardType:"label",dialog:f.dialog,compareDialog:f.compareDialog,openDialog:f.openDialog,aboutDialog:f.aboutDialog,creditsDialog:f.creditsDialog,icons:{subOption:{1:"mdi-emoticon-happy-outline",2:"mdi-emoticon-sad-outline"},compare:"mdi"},overlay:!1,drawer:!1,errors:{FAILED_TO_FETCH_SPREADSHEET:!1,FAILED_TO_FETCH_ICO:!1},snackbar:!1,fields:{projectName:"",spreadsheetUrl:"",nextcloudUrl:""},errorMessages:{FAILED_TO_FETCH_SPREADSHEET:"The Spreadsheet isn't published or doesn't exist",FAILED_TO_FETCH_ICO:"This project name doesn't exist (note: name is case-sensitive)"},recentProjects:[],recentProjectNames:localStorage.recentProjectNames&&null!==JSON.parse(localStorage.recentProjectNames)?JSON.parse(localStorage.recentProjectNames):{},recentProjectSpreadsheets:localStorage.recentProjectSpreadsheets&&null!==JSON.parse(localStorage.recentProjectSpreadsheets)?JSON.parse(localStorage.recentProjectSpreadsheets):{}}),y=()=>{b.data=f.data,b.project=f.project,b.spreadsheet=f.spreadsheet},k=()=>{b.mode=f.mode},E=()=>{y(),_(),k(),S()},S=()=>{b.selectedSuperset=f.selectedSuperset,b.selectedSupersets.splice(0),b.compareDialog=f.compareDialog,b.dialog=f.dialog,b.openDialog=f.openDialog},_=()=>{b.searchInput=f.searchInput,b.selectedAims=f.selectedAims,b.selectedCriterions=f.selectedCriterions,b.selectedStakeholders=f.selectedStakeholders},C=e=>{const t=new RegExp("^(?:[a-z]+:)?//","i"),r=t.test(e);return r?e:"https://ico.iate.inra.fr/MyChoice/img/"+b.project.name+"/"+e},F=(0,n.EW)((()=>!!(b.vm&&b.vm.$route&&b.vm.$route.query&&b.vm.$route.query.spreadsheet))),w=((0,n.EW)((()=>b.vm&&b.vm.$route?b.vm.$route:null)),(0,n.EW)((()=>b.overlay))),x=(0,n.EW)((()=>null===b.project)),I=e=>`https://docs.google.com/spreadsheets/d/${e}`,L=((0,n.EW)((()=>b.project&&b.project.name?b.project.name:null)),(0,n.EW)((()=>"stakeholder"===b.globalCardType))),O=(0,n.EW)((()=>b.selectedSupersets)),j=()=>{b.overlay=!0},A=()=>{b.overlay=!1};(0,n.wB)((()=>b.globalCardType),((e,t)=>{e!==t&&S()}));const W=(0,n.EW)((()=>Object.entries(b.recentProjects).filter((([e,{type:t}])=>"googlespreadsheet"===t)))),X=(0,n.EW)((()=>Object.entries(b.recentProjects).filter((([e,{type:t}])=>"ico"===t)))),T=(0,n.EW)((()=>Object.entries(b.recentProjects).filter((([e,{type:t}])=>"nextcloud"===t))));var P=r(5220);const D={class:"text-center mt-0"},R={key:0,class:"font-weight-light caption mx-2"},N={class:"text-center mt-n6 mb-3"},$={class:"text-justify body-1"},B={class:"versus-list"},q={key:0,class:"d-flex align-center mx-auto"},V={class:"title lh-1 mb-1 font-weight-bold"},H=["src"];function M(e,t,r,a,s,o){const i=(0,n.g2)("v-card-title"),c=(0,n.g2)("v-card-subtitle"),u=(0,n.g2)("v-icon"),d=(0,n.g2)("v-img"),p=(0,n.g2)("v-btn"),m=(0,n.g2)("v-card-text"),h=(0,n.g2)("v-avatar"),v=(0,n.g2)("v-list-item"),f=(0,n.g2)("v-card"),g=(0,n.g2)("v-col"),b=(0,n.g2)("v-row"),y=(0,n.g2)("v-container"),k=(0,n.g2)("Empty");return(0,n.uX)(),(0,n.Wv)(f,{tile:"",class:"flex-grow-1 white--text grey lighten-4"},{default:(0,n.k6)((()=>[e.state.project?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.bF)(d,{class:"align-center",height:"300px",src:`${e.getImagePath(e.state.project.image)}`},{default:(0,n.k6)((()=>[(0,n.bF)(i,{class:"display-1 mb-4 justify-center"},{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(e.state.project.name),1)])),_:1}),(0,n.bF)(c,{class:"title font-weight-light pb-0 white--text justify-center text-center"},{default:(0,n.k6)((()=>t[1]||(t[1]=[(0,n.eW)("The alternatives discussed in the project are: ")]))),_:1}),(0,n.Lk)("div",D,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.alternativesIds,((t,r)=>((0,n.uX)(),(0,n.CE)("span",{class:"title",key:t},[0!==r?((0,n.uX)(),(0,n.CE)("small",R,"VS")):(0,n.Q3)("",!0),(0,n.bF)(u,{dark:""},{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(e.getAlternatives[t].icon),1)])),_:2},1024),(0,n.eW)(" "+(0,l.v_)(e.getAlternatives[t].name),1)])))),128))])])),_:1},8,["src"]),(0,n.Lk)("div",N,[(0,n.bF)(p,{onClick:t[0]||(t[0]=t=>e.switchToView("global-view")),"x-large":"",color:"primary"},{default:(0,n.k6)((()=>[(0,n.eW)("Open "+(0,l.v_)(e.state.project.name)+" project",1)])),_:1})]),(0,n.bF)(y,null,{default:(0,n.k6)((()=>[(0,n.bF)(m,{class:"text--primary d-flex justify-center"},{default:(0,n.k6)((()=>[(0,n.Lk)("p",$,(0,l.v_)(e.state.project.description),1)])),_:1}),(0,n.bF)(b,null,{default:(0,n.k6)((()=>[(0,n.bF)(g,{style:{"overflow-x":"auto","text-align":"center"}},{default:(0,n.k6)((()=>[(0,n.Lk)("div",B,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.alternativesIds,((r,a)=>((0,n.uX)(),(0,n.CE)("div",{class:"versus-list__item",key:"card-"+r+a},[0!==a?((0,n.uX)(),(0,n.CE)("div",q,t[2]||(t[2]=[(0,n.Lk)("small",{class:"grey--text text--lighten-1 font-weight-bold title px-6"},"VS",-1)]))):(0,n.Q3)("",!0),(0,n.bF)(f,{"min-width":"280","max-width":"320",class:"",outlined:""},{default:(0,n.k6)((()=>[(0,n.bF)(v,{"three-line":""},{default:(0,n.k6)((()=>[(0,n.Lk)("div",V,[(0,n.bF)(u,{class:"primary--text text--lighten-2",light:""},{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(e.getAlternatives[r].icon),1)])),_:2},1024),(0,n.eW)(" "+(0,l.v_)(e.getAlternatives[r].name),1)]),(0,n.bF)(h,{size:"56",color:"grey"},{default:(0,n.k6)((()=>[(0,n.Lk)("img",{src:`${e.getImagePath(e.getAlternatives[r].image)}`},null,8,H)])),_:2},1024)])),_:2},1024),(0,n.bF)(m,null,{default:(0,n.k6)((()=>[(0,n.Lk)("p",null,(0,l.v_)(e.getAlternatives[r].description),1)])),_:2},1024)])),_:2},1024)])))),128))])])),_:1})])),_:1}),(0,n.bF)(b,null,{default:(0,n.k6)((()=>t[3]||(t[3]=[(0,n.Lk)("div",{class:"disclaimer"},[(0,n.Lk)("div",{class:"title"},"Disclaimer"),(0,n.Lk)("ul",{class:"caption"},[(0,n.Lk)("li",null,"The authors and publisher of the software cannot be held liable in any way for the consequences that may result from the use or interpretation of the information processed by the MyChoice software. In addition, the information entered is that of the users. Their quality conditions the quality of the final result. The user is solely responsible for the use made of the information as it results from the processing by the MyChoice software. "),(0,n.Lk)("li",null,[(0,n.eW)("By using the MyChoice software, users agree to explicitly cite the tool (home page "),(0,n.Lk)("a",{href:"https://ico.iate.inra.fr/MyChoice/"},"https://ico.iate.inra.fr/MyChoice/"),(0,n.eW)(" and associated publications indicated on the home page) in any communication using MyChoice, clearly indicating the contributions from the MyChoice software (in particular methods to structure and analyze arguments and associated data). The use of contributors' attributes (logo, brands, etc.) without explicit, duly formalized acceptance, is prohibited. ")])])],-1)]))),_:1})])),_:1})],64)):(0,n.Q3)("",!0),e.state.project?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(k,{key:1}))])),_:1})}const G={key:0,class:"d-flex flex-column align-center justify-center flex-grow-1",style:{"min-height":"100%"}},U={class:"mb-5"},Q={key:0},z=["href"];function K(e,t,r,a,s,o){const i=(0,n.g2)("v-icon"),c=(0,n.g2)("v-btn"),u=(0,n.g2)("v-container"),d=(0,n.g2)("v-card");return e.isEmptyProject&&!e.isLoading?((0,n.uX)(),(0,n.CE)("div",G,[(0,n.bF)(d,{color:"transparent",class:"text-center",elevation:"0"},{default:(0,n.k6)((()=>[(0,n.bF)(u,null,{default:(0,n.k6)((()=>[(0,n.Lk)("h4",U,[e.isSpreadsheet?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("span",Q,(0,l.v_)(e.getRouteProjectId),1)),e.isSpreadsheet?((0,n.uX)(),(0,n.CE)("a",{key:1,target:"_blank",href:e.getSpreadsheetLink(e.getRouteProjectId)},(0,l.v_)(e.getRouteProjectId),9,z)):(0,n.Q3)("",!0),e.isSpreadsheet?((0,n.uX)(),(0,n.Wv)(i,{key:2,class:"ml-2"},{default:(0,n.k6)((()=>t[0]||(t[0]=[(0,n.eW)("mdi-google-spreadsheet")]))),_:1})):(0,n.Q3)("",!0)]),(0,n.bF)(c,{onClick:e.refreshProject},{default:(0,n.k6)((()=>[(0,n.bF)(i,{small:"",class:"mr-3"},{default:(0,n.k6)((()=>t[1]||(t[1]=[(0,n.eW)("mdi-autorenew")]))),_:1}),t[2]||(t[2]=(0,n.eW)("Refresh project "))])),_:1},8,["onClick"])])),_:1})])),_:1})])):(0,n.Q3)("",!0)}var J=(0,n.pM)({setup(){return{getSpreadsheetLink:I,isSpreadsheet:F,getRouteProjectId:la,state:b,refreshProject:Ts,isLoading:w,isEmptyProject:x}}}),Y=r(6262);const Z=(0,Y.A)(J,[["render",K]]);var ee=Z,te=(0,n.pM)({setup(){return{alternativesIds:(0,n.EW)((()=>ml())),getAlternatives:(0,n.EW)((()=>dl())),switchToView:function(e){return ea(e)},getImagePath:C,getFilteredItemsBy:Rl,state:b}},components:{Empty:ee}});const re=(0,Y.A)(te,[["render",M]]);var ae=re;const ne={class:"flex-grow-1 d-flex flex-column"},le={class:"flex-grow-1 d-flex flex-column"},se=["src"];function oe(e,t,r,s,o,i){const c=(0,n.g2)("v-col"),u=(0,n.g2)("v-row"),d=(0,n.g2)("v-icon"),p=(0,n.g2)("v-btn"),m=(0,n.g2)("v-list-subheader"),h=(0,n.g2)("v-card-subtitle"),v=(0,n.g2)("v-list-item-title"),f=(0,n.g2)("v-spacer"),g=(0,n.g2)("v-list-item-action"),b=(0,n.g2)("v-list-item"),y=(0,n.g2)("v-list"),k=(0,n.g2)("v-card"),E=(0,n.g2)("v-container"),S=(0,n.g2)("Version"),_=(0,n.g2)("v-footer");return(0,n.uX)(),(0,n.CE)("div",ne,[(0,n.Lk)("div",le,[(0,n.bF)(E,{class:"mb-auto"},{default:(0,n.k6)((()=>[(0,n.bF)(u,null,{default:(0,n.k6)((()=>[(0,n.bF)(c,{cols:"12"},{default:(0,n.k6)((()=>[(0,n.bF)(u,null,{default:(0,n.k6)((()=>[(0,n.bF)(c,null,{default:(0,n.k6)((()=>[(0,n.Lk)("img",{style:{padding:"2rem 0",width:"100%","max-width":"240px"},class:"d-flex mr-auto",src:e.state.baseUrl+"logo-mychoice-color.svg"},null,8,se)])),_:1})])),_:1}),(0,n.bF)(u,{justify:"center",class:"grey lighten-5"},{default:(0,n.k6)((()=>[(0,n.bF)(c,{cols:"12",sm:"8",lg:"8"},{default:(0,n.k6)((()=>t[2]||(t[2]=[(0,n.Lk)("b",null,"MyChoice",-1),(0,n.eW)(" is a web application supporting collective decision, designed by INRAE. The software enables project participants to: "),(0,n.Lk)("ul",{class:"mb-6"},[(0,n.Lk)("li",null," Analyze, compare and assess stakeholders' attitudes towards different alternatives. "),(0,n.Lk)("li",null," Review explanatory arguments stemming from various sources and reflecting different concerns. "),(0,n.Lk)("li",null,"Explain the criteria, aims and features pursued."),(0,n.Lk)("li",null,"Highlight potential synergies or competing concerns."),(0,n.Lk)("li",null," Propose different modes of decision support (expert, consensual, prospective, etc.). ")],-1),(0,n.Lk)("br",null,null,-1),(0,n.Lk)("div",{class:"",align:"center",justify:"center"},[(0,n.Lk)("video",{controls:"",width:"50%",height:"30%"},[(0,n.Lk)("source",{src:"presentation_mychoice.mp4"}),(0,n.eW)(" Votre navigateur ne gère pas l'élément "),(0,n.Lk)("code",null,"video"),(0,n.eW)(". ")])],-1),(0,n.Lk)("br",null,null,-1),(0,n.Lk)("h6",{class:"overline mb-2"},"References",-1),(0,n.Lk)("ul",{class:"caption"},[(0,n.Lk)("li",null,[(0,n.eW)(" Rallou Thomopoulos, Julien Cufi, Maxime Le Breton. A Generic Software to Support Collective Decision in Food Chains and in Multi-Stakeholder Situations. "),(0,n.Lk)("em",null,"FoodSim 2020"),(0,n.eW)(", Sep 2020, Ghent, Belgium. ("),(0,n.Lk)("a",{href:"https://hal.archives-ouvertes.fr/hal-02484363",target:"_blank"},"hal-02484363"),(0,n.eW)(") ")]),(0,n.Lk)("li",null,[(0,n.eW)(" Rallou Thomopoulos. A practical application approach to argumentation for multicriteria analysis and decision support. "),(0,n.Lk)("em",null,"EURO journal on decision processes"),(0,n.eW)(", Springer, 2018, 6 (3-4), pp.237-255. ("),(0,n.Lk)("a",{href:"https://dx.doi.org/10.1007/s40070-018-0087-2",target:"_blank"},"10.1007/s40070-018-0087-2"),(0,n.eW)("). ("),(0,n.Lk)("a",{href:"https://hal.archives-ouvertes.fr/hal-01918020",target:"_blank"},"hal-01918020"),(0,n.eW)(") ")])],-1),(0,n.Lk)("br",null,null,-1),(0,n.Lk)("h6",{class:"overline mb-2"},"Disclaimer",-1),(0,n.Lk)("div",{class:"caption"},[(0,n.Lk)("ul",null,[(0,n.Lk)("li",null,"The authors and publisher of the software cannot be held liable in any way for the consequences that may result from the use or interpretation of the information processed by the MyChoice software. In addition, the information entered is that of the users. Their quality conditions the quality of the final result. The user is solely responsible for the use made of the information as it results from the processing by the MyChoice software. "),(0,n.Lk)("li",null,[(0,n.eW)("By using the MyChoice software, users agree to explicitly cite the tool (home page "),(0,n.Lk)("a",{href:"https://ico.iate.inra.fr/MyChoice/"},"https://ico.iate.inra.fr/MyChoice/"),(0,n.eW)(" and associated publications indicated on the home page) in any communication using MyChoice, clearly indicating the contributions from the MyChoice software (in particular methods to structure and analyze arguments and associated data). The use of contributors' attributes (logo, brands, etc.) without explicit, duly formalized acceptance, is prohibited. ")])])],-1)]))),_:1}),(0,n.bF)(c,{class:"py-0",lg:"4"},{default:(0,n.k6)((()=>[(0,n.bF)(u,null,{default:(0,n.k6)((()=>[(0,n.bF)(c,{class:"d-flex",lg:"12"},{default:(0,n.k6)((()=>[(0,n.bF)(u,null,{default:(0,n.k6)((()=>[(0,n.bF)(c,{class:"d-flex"},{default:(0,n.k6)((()=>[(0,n.bF)(p,{class:"mx-auto my-auto",onClick:e.handleLoadFile},{default:(0,n.k6)((()=>[(0,n.bF)(d,{class:"mr-2"},{default:(0,n.k6)((()=>t[3]||(t[3]=[(0,n.eW)("mdi-upload")]))),_:1}),t[4]||(t[4]=(0,n.eW)("Open local project "))])),_:1},8,["onClick"])])),_:1}),(0,n.bF)(c,{class:"d-flex"},{default:(0,n.k6)((()=>[(0,n.bF)(p,{class:"mx-auto my-auto",onClick:t[0]||(t[0]=t=>e.state.openDialog=!0)},{default:(0,n.k6)((()=>[(0,n.bF)(d,{class:"mr-2"},{default:(0,n.k6)((()=>t[5]||(t[5]=[(0,n.eW)("mdi-cloud-upload")]))),_:1}),t[6]||(t[6]=(0,n.eW)("Open online project "))])),_:1})])),_:1})])),_:1})])),_:1}),(0,n.bF)(c,{lg:"12"},{default:(0,n.k6)((()=>[(0,n.bF)(m,null,{default:(0,n.k6)((()=>t[7]||(t[7]=[(0,n.eW)("Recent projects")]))),_:1}),(0,n.bF)(k,{disabled:!e.recentProjects.length,flat:"",tile:""},{default:(0,n.k6)((()=>[e.recentProjects.length?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(h,{key:0},{default:(0,n.k6)((()=>t[8]||(t[8]=[(0,n.eW)("No recent projects")]))),_:1})),e.recentProjects.length?((0,n.uX)(),(0,n.Wv)(y,{key:1},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.recentProjects,((r,s)=>((0,n.uX)(),(0,n.Wv)(b,{to:e.getHrefFromTypeId({type:r.type,id:r.id}),key:"home-recent-"+s},{default:(0,n.k6)((()=>[(0,n.bF)(v,null,{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(r.name||r.id),1)])),_:2},1024),"googlespreadsheet"===r.type?((0,n.uX)(),(0,n.Wv)(d,{key:0,pos:""},{default:(0,n.k6)((()=>t[9]||(t[9]=[(0,n.eW)(" mdi-google-spreadsheet ")]))),_:1})):(0,n.Q3)("",!0),(0,n.bF)(f),(0,n.bF)(g,{onClick:t[1]||(t[1]=(0,a.D$)((()=>{}),["stop"]))},{default:(0,n.k6)((()=>[(0,n.bF)(p,{icon:"",onClick:(0,a.D$)((t=>e.removeFromRecentProjects(r.type,{id:r.id})),["stop","prevent"])},{default:(0,n.k6)((()=>[(0,n.bF)(d,null,{default:(0,n.k6)((()=>t[10]||(t[10]=[(0,n.eW)("mdi-close")]))),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["to"])))),128))])),_:1})):(0,n.Q3)("",!0)])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,n.bF)(u)])),_:1}),(0,n.bF)(_,null,{default:(0,n.k6)((()=>[(0,n.bF)(S)])),_:1})])])}const ie={class:"text--small grey--text"};function ce(e,t,r,a,s,o){return(0,n.uX)(),(0,n.CE)("small",ie,"v"+(0,l.v_)(e.version),1)}var ue={data:()=>({version:"1.5.1-saffi"})};const de=(0,Y.A)(ue,[["render",ce]]);var pe=de,me=(0,n.pM)({setup(){return{state:b,recentProjects:Rn,getHrefFromTypeId:cl,removeFromRecentProjects:Hn,handleLoadFile:gs}},components:{Version:pe}});const he=(0,Y.A)(me,[["render",oe]]);var ve=he;const fe={key:0,class:"full"},ge={class:"full__item",style:{"flex-shrink":"1","flex-grow":"0"}},be={class:"full__item",style:{padding:"0",margin:"0 12px 12px 12px",position:"relative",overflow:"hidden"}},ye={class:"compare-container elevation-3"},ke={style:{position:"fixed",left:"0",transform:"translateY(-50%) translateX(-25%)"},class:"overline ml-4 pt-3"};function Ee(e,t,r,s,o,i){const c=(0,n.g2)("Header"),u=(0,n.g2)("v-container"),d=(0,n.g2)("TableList"),p=(0,n.g2)("v-card"),m=(0,n.g2)("v-icon"),h=(0,n.g2)("v-badge"),v=(0,n.g2)("v-btn"),f=(0,n.g2)("SupersetCard"),g=(0,n.g2)("v-dialog"),b=(0,n.g2)("v-expand-transition");return e.state.project&&e.state.data?((0,n.uX)(),(0,n.CE)("div",fe,[(0,n.Lk)("div",ge,[(0,n.bF)(u,{fluid:""},{default:(0,n.k6)((()=>[(0,n.bF)(c)])),_:1})]),(0,n.Lk)("div",be,[(0,n.bF)(u,{class:"tablelist-container",style:{margin:"0 0 0 0","padding-left":"0"},fluid:""},{default:(0,n.k6)((()=>[(0,n.bF)(p,{elevation:"0","rounded-card":""},{default:(0,n.k6)((()=>[t[3]||(t[3]=(0,n.Lk)("div",{class:"tablelist-x-shadow"},null,-1)),t[4]||(t[4]=(0,n.Lk)("div",{class:"tablelist-y-shadow"},null,-1)),((0,n.uX)(),(0,n.Wv)(d,{key:e.state.project.name}))])),_:1})])),_:1})]),t[7]||(t[7]=(0,n.Lk)("div",{class:"full__item",style:{"flex-shrink":"1","flex-grow":"0"}},null,-1)),(0,n.bF)(v,{onClick:t[0]||(t[0]=t=>e.state.compareDialog=!e.state.compareDialog),fab:"",color:"secondary",disabled:0===e.selectedSupersets.length,dark:0!==e.selectedSupersets.length,absolute:"",bottom:"",left:"",style:{transform:"translateY(calc(-50% - 32px)) translateX(0)"}},{default:(0,n.k6)((()=>[(0,n.bF)(m,null,{default:(0,n.k6)((()=>t[5]||(t[5]=[(0,n.eW)("mdi-select-compare")]))),_:1}),e.selectedSupersets.length>0?((0,n.uX)(),(0,n.Wv)(h,{key:0,style:{"margin-top":"-50%"},dark:""},{badge:(0,n.k6)((()=>[(0,n.Lk)("span",null,(0,l.v_)(e.selectedSupersets.length),1)])),_:1})):(0,n.Q3)("",!0)])),_:1},8,["disabled","dark"]),(0,n.bF)(g,{"onClick:outside":t[1]||(t[1]=t=>e.state.selectedSuperset=""),value:!!e.state.selectedSuperset.length,"max-width":"480px"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",null,[e.state.selectedSuperset.length?((0,n.uX)(),(0,n.Wv)(f,{key:0,superset:JSON.parse(e.state.selectedSuperset)},null,8,["superset"])):(0,n.Q3)("",!0)])])),_:1},8,["value"]),(0,n.bF)(b,null,{default:(0,n.k6)((()=>[(0,n.bo)((0,n.Lk)("div",ye,[(0,n.bF)(p,{color:"grey lighten-4",tile:""},{default:(0,n.k6)((()=>[(0,n.Lk)("div",ke,[(0,n.bF)(v,{onClick:t[2]||(t[2]=t=>e.state.compareDialog=!1),fab:"","x-small":"",color:"secondary",dark:""},{default:(0,n.k6)((()=>[(0,n.bF)(m,null,{default:(0,n.k6)((()=>t[6]||(t[6]=[(0,n.eW)("mdi-close")]))),_:1})])),_:1})]),(0,n.bF)(u,{class:"supersets-container",fluid:""},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.selectedSupersets,(t=>((0,n.uX)(),(0,n.CE)("div",{class:"card-compare",key:t+e.state.mode},[(0,n.bF)(f,{compare:!0,cols:4,superset:JSON.parse(t)},null,8,["superset"])])))),128))])),_:1})])),_:1})],512),[[a.aG,e.state.compareDialog&&e.selectedSupersets.length]])])),_:1})])):(0,n.Q3)("",!0)}const Se={class:"tablelist table"},_e={key:0,style:{height:"100%"},class:"text-center"},Ce=["colspan"],Fe={class:"grey--text"};function we(e,t,r,l,s,o){const i=(0,n.g2)("TableListHead"),c=(0,n.g2)("TableListFoot"),u=(0,n.g2)("TableListCriterion"),d=(0,n.g2)("TableListAim"),p=(0,n.g2)("TableListAlternative"),m=(0,n.g2)("v-btn");return(0,n.uX)(),(0,n.CE)("table",Se,[(0,n.Lk)("thead",null,[(0,n.bF)(i)]),(0,n.Lk)("tfoot",null,[(0,n.bF)(c)]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.c_criterionsIds,(t=>((0,n.uX)(),(0,n.CE)(n.FK,null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.getAimsBy("criterion",t),((r,l)=>((0,n.uX)(),(0,n.CE)("tr",{key:`aim-${t}-${l}`},[0===l?(0,n.bo)(((0,n.uX)(),(0,n.Wv)(u,{key:0,aim:r,criterionId:t},null,8,["aim","criterionId"])),[[a.aG,e.getFilteredCriterions.includes(t)]]):(0,n.Q3)("",!0),(0,n.bo)((0,n.bF)(d,{aim:r},null,8,["aim"]),[[a.aG,e.getFilteredAims.includes(r.id)]]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.alternativesIds,(l=>((0,n.uX)(),(0,n.CE)(n.FK,null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.subOptionsIds,(s=>(0,n.bo)(((0,n.uX)(),(0,n.Wv)(p,{key:`alternative-${l}-${s}`,aim:r,criterionId:t,alternativeId:l,subOptionId:s,alternativesIds:e.alternativesIds,subOptionsIds:e.subOptionsIds},null,8,["aim","criterionId","alternativeId","subOptionId","alternativesIds","subOptionsIds"])),[[a.aG,e.getFilteredAims.includes(r.id)]]))),128))],64)))),256))])))),128))],64)))),256)),e.getFilteredItems.length?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("tr",_e,[(0,n.Lk)("td",{class:"pt-10",colspan:5+e.alternativesIds.length},[(0,n.Lk)("b",Fe,[t[2]||(t[2]=(0,n.eW)(" No results. ")),t[3]||(t[3]=(0,n.Lk)("br",null,null,-1)),t[4]||(t[4]=(0,n.Lk)("br",null,null,-1)),(0,n.bF)(m,{small:"",color:"secondary",onClick:t[0]||(t[0]=t=>e.clearAppFilters())},{default:(0,n.k6)((()=>t[1]||(t[1]=[(0,n.eW)("clear filters")]))),_:1})])],8,Ce)]))])])}const xe={class:"text-uppercase"},Ie=["colspan"];function Le(e,t,r,a,s,o){const i=(0,n.g2)("v-icon");return(0,n.uX)(),(0,n.CE)("tr",xe,[t[0]||(t[0]=(0,n.Lk)("th",{criterion:""},"Criterion",-1)),t[1]||(t[1]=(0,n.Lk)("th",{aim:""},"Aim",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.alternativesIds,(t=>((0,n.uX)(),(0,n.CE)("th",{alternative:"",key:`alternative-${t}`,colspan:e.subOptionsIds.length},[e.state.data?((0,n.uX)(),(0,n.Wv)(i,{key:0},{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(e.state.data.alternatives[t].icon),1)])),_:2},1024)):(0,n.Q3)("",!0),(0,n.eW)(" "+(0,l.v_)(e.getAlternatives[t].name),1)],8,Ie)))),128))])}var Oe=(0,n.pM)({setup(){return{state:b,alternativesIds:(0,n.EW)((()=>ml())),subOptionsIds:(0,n.EW)((()=>Ml())),getAlternatives:(0,n.EW)((()=>dl()))}}});const je=(0,Y.A)(Oe,[["render",Le]]);var Ae=je;const We={tablelistfoot:""},Xe={"criterion-aim":"",class:"text-right",colspan:"2"},Te={class:"grey--text",style:{"font-weight":"normal"}},Pe=["colspan"],De={style:{width:"100%"}},Re={class:"text-left"},Ne={class:"text-right"};function $e(e,t,r,a,s,o){const i=(0,n.g2)("v-container"),c=(0,n.g2)("v-icon"),u=(0,n.g2)("ScoreIcon");return(0,n.uX)(),(0,n.CE)("tr",We,[(0,n.Lk)("th",Xe,[(0,n.bF)(i,null,{default:(0,n.k6)((()=>[(0,n.Lk)("small",Te,[t[0]||(t[0]=(0,n.eW)(" Arguments: ")),(0,n.Lk)("b",null,(0,l.v_)(e.getFilteredItems.length)+"/"+(0,l.v_)(e.getAllItems.length),1)])])),_:1})]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.subOptionsIds,(r=>((0,n.uX)(),(0,n.CE)("th",{key:`subOption-${r}`,alternative:"",colspan:e.subOptionsIds.length},[(0,n.Lk)("table",De,[(0,n.Lk)("tr",null,[(0,n.Lk)("td",Re,[(0,n.bF)(c,{color:"green",title:e.pluralize("{count} {argument:count}",{count:e.getFilteredItemsBy({alternative:r,favorable:!0}).length})},{default:(0,n.k6)((()=>t[1]||(t[1]=[(0,n.eW)("mdi-emoticon-happy-outline")]))),_:2},1032,["title"])]),(0,n.Lk)("td",null,[(0,n.eW)(" Attitude: "+(0,l.v_)(e.totalAcceptability[r])+" ",1),(0,n.bF)(u,{alternative:r,score:e.totalAcceptability[r]},null,8,["alternative","score"])]),(0,n.Lk)("td",Ne,[(0,n.bF)(c,{color:"red",title:e.pluralize("{count} {argument:count}",{count:e.getFilteredItemsBy({alternative:r,favorable:!1}).length})},{default:(0,n.k6)((()=>t[2]||(t[2]=[(0,n.eW)("mdi-emoticon-sad-outline")]))),_:2},1032,["title"])])])])],8,Pe)))),128))])}function Be(e,t,r,a,s,o){const i=(0,n.g2)("v-icon"),c=(0,n.g2)("v-avatar"),u=(0,n.g2)("v-chip");return(0,n.uX)(),(0,n.CE)("span",null,[e.icon?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(i,{key:0,title:e.title,"x-small":"",color:e.getColorName(e.getAcceptabilityName(e.score))},{default:(0,n.k6)((()=>t[0]||(t[0]=[(0,n.eW)("mdi-circle")]))),_:1},8,["title","color"])),e.icon?((0,n.uX)(),(0,n.Wv)(u,{key:1,title:e.title,outlined:"",dark:"",small:"",style:{padding:"0"},color:e.getColorName(e.getAcceptabilityName(e.score))},{default:(0,n.k6)((()=>[(0,n.bF)(c,null,{default:(0,n.k6)((()=>[e.state.data?((0,n.uX)(),(0,n.Wv)(i,{key:0,small:""},{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(e.state.data.alternatives[e.alternative].icon),1)])),_:1})):(0,n.Q3)("",!0)])),_:1})])),_:1},8,["title","color"])):(0,n.Q3)("",!0)])}var qe=(0,n.pM)({props:{score:{type:Number||null},title:{},alternative:{type:Number},icon:{}},setup(e){return{state:b,getColorName:e=>"pro"===e?"green":"con"===e?"red":"mix"===e?"orange":"rgba(0,0,0,.2)",getAcceptabilityName:cs}}});const Ve=(0,Y.A)(qe,[["render",Be]]);var He=Ve,Me=(0,n.pM)({setup(){return{state:b,getAcceptabilityFromAlternativeId:us,getFilteredItemsBy:Rl,getWeightedAcceptability:ls,pluralize:ka,totalAcceptability:(0,n.EW)((()=>ls(Xl()))),alternativesIds:(0,n.EW)((()=>ml())),subOptionsIds:(0,n.EW)((()=>Ml())),getSubOptions:(0,n.EW)((()=>Hl())),getFilteredItems:(0,n.EW)((()=>Xl())),getAllItems:(0,n.EW)((()=>Wl()))}},components:{ScoreIcon:He}});const Ge=(0,Y.A)(Me,[["render",$e]]);var Ue=Ge;const Qe={aim:""},ze={class:"d-flex flex-column justify-space-between text-break"},Ke={class:"d-flex"},Je={class:"mt-1 flex-grow-1 flex-wrap d-flex"};function Ye(e,t,r,a,s,o){const i=(0,n.g2)("Acceptability"),c=(0,n.g2)("ItemsCount");return(0,n.uX)(),(0,n.CE)("td",Qe,[(0,n.Lk)("div",ze,[(0,n.Lk)("div",Ke,(0,l.v_)(e.aim.name),1),(0,n.Lk)("div",Je,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.c_alternativesIds,((t,r)=>((0,n.uX)(),(0,n.Wv)(i,{key:"aim-alternative-"+r+e.aimsItems[t],class:"mb-1 mr-1",icon:!0,alternative:t,items:e.aimsItems[t]},null,8,["alternative","items"])))),128))])]),(0,n.bF)(c,{count:e.totalItems},null,8,["count"])])}r(8237);function Ze(e,t,r,a,s,o){const i=(0,n.g2)("v-chip");return(0,n.uX)(),(0,n.Wv)(i,{outlined:"","x-small":"",title:e.title},{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(e.count),1)])),_:1},8,["title"])}var et=(0,n.pM)({props:["count"],setup(e){return{title:(0,n.EW)((()=>ka("{count} {argument:count}",{count:e.count})))}}});const tt=(0,Y.A)(et,[["render",Ze]]);var rt=tt;function at(e,t,r,a,l,s){const o=(0,n.g2)("ScoreIcon");return(0,n.uX)(),(0,n.Wv)(o,{title:""+(null!==e.acceptability?`${e.pluralize("{count} {argument:count}",{count:e.items.length})} - ${100*e.acceptability}% pro`:""),alternative:e.alternative,icon:e.icon,score:e.acceptability},null,8,["title","alternative","icon","score"])}var nt=(0,n.pM)({props:{items:{type:Array},alternative:{type:Number},icon:{type:Boolean}},setup(e){const{items:t,alternative:r,icon:a}=(0,v.QW)(e);return{acceptability:(0,n.EW)((()=>is(t.value))),getAcceptabilityFromProCon:is,pluralize:ka}},components:{ScoreIcon:He},computed:{},methods:{}});const lt=(0,Y.A)(nt,[["render",at]]);var st=lt,ot=(0,n.pM)({props:{aim:{type:Object}},setup(e){const{aim:t}=(0,v.QW)(e),r=(0,n.EW)((()=>{let e={};return hl.value.forEach((r=>{const a=Rl({alternative:r,aim:t.value.id});e[r]=a})),e})),a=(0,n.EW)((()=>Object.values(r.value).reduce(((e,t)=>e+t.length),0)));return{c_alternativesIds:hl,aimsItems:r,totalItems:a,getFilteredItemsBy:Rl}},components:{Acceptability:st,ItemsCount:rt}});const it=(0,Y.A)(ot,[["render",Ye]]);var ct=it;const ut=["rowspan"],dt={class:"d-flex flex-column justify-space-between text-break"},pt={class:"mt-1 flex-grow-1 flex-wrap d-flex"};function mt(e,t,r,a,s,o){const i=(0,n.g2)("Acceptability"),c=(0,n.g2)("ItemsCount");return(0,n.uX)(),(0,n.CE)("td",{criterion:"",rowspan:e.getAimsBy("criterion",e.criterionId).length},[(0,n.Lk)("div",dt,[(0,n.Lk)("div",null,(0,l.v_)(e.c_criterions[e.aim.criterion].name),1),(0,n.Lk)("div",pt,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.c_alternativesIds,((t,r)=>((0,n.uX)(),(0,n.Wv)(i,{key:"citerion-alternative-"+r+e.criterionItems[t],class:"mb-1 mr-1",icon:!0,alternative:t,items:e.criterionItems[t]},null,8,["alternative","items"])))),128))])]),(0,n.bF)(c,{count:e.totalItems},null,8,["count"])],8,ut)}var ht=(0,n.pM)({props:{aim:{type:Object},criterionId:{type:Number}},setup(e){const{aim:t,criterionId:r}=(0,v.QW)(e),a=(0,n.EW)((()=>{let e={};return hl.value.forEach((t=>{const a=Rl({alternative:t,criterion:r.value});e[t]=a})),e}));return{getAimsBy:El,c_alternativesIds:hl,criterionItems:a,totalItems:(0,n.EW)((()=>Object.values(a.value).reduce(((e,t)=>e+t.length),0))),c_criterions:xl,getFilteredCriterions:Al}},components:{Acceptability:st,ItemsCount:rt}});const vt=(0,Y.A)(ht,[["render",mt]]);var ft=vt;function gt(e,t,r,a,s,o){const i=(0,n.g2)("TableListCard");return(0,n.uX)(),(0,n.CE)("td",{class:(0,l.C4)(e.getLabels().length?"":"is-empty"),alternative:"",key:`${e.alternativeId}${e.subOptionId}`},[e.is1stLevelStakeholdersMode?((0,n.uX)(!0),(0,n.CE)(n.FK,{key:0},(0,n.pI)(e.getCardsByStakeholder(),((t,r)=>((0,n.uX)(),(0,n.Wv)(i,{superset:{criterion:e.criterionId,aim:e.aim.id,alternative:e.alternativeId,subOption:e.subOptionId,stakeholder:Number(r)},key:`superset-${e.aim.id}-stakeholder-${r}`},null,8,["superset"])))),128)):((0,n.uX)(!0),(0,n.CE)(n.FK,{key:1},(0,n.pI)(e.getLabels(),((t,r)=>((0,n.uX)(),(0,n.Wv)(i,{superset:{criterion:e.criterionId,aim:e.aim.id,alternative:e.alternativeId,subOption:e.subOptionId,property:t.property,value:t.value},key:`superset-${t.property}-${t.value}-${r}`},null,8,["superset"])))),128))],2)}var bt=r(2543);const yt={key:0},kt={key:1},Et={class:"d-flex"},St={class:"card-compare-btn"},_t={key:0,class:"ml-auto mr-2 mb-1 text-right",style:{"text-overflow":"ellipsis",display:"block",overflow:"hidden",width:"calc(100% - 4em)","white-space":"nowrap"}};function Ct(e,t,r,s,o,i){const c=(0,n.g2)("text-highlight"),u=(0,n.g2)("v-chip"),d=(0,n.g2)("v-container"),p=(0,n.g2)("v-icon"),m=(0,n.g2)("v-btn"),h=(0,n.g2)("v-card");return(0,n.uX)(),(0,n.Wv)(h,{elevation:"1",onClick:t[2]||(t[2]=t=>e.toggleSuperset(e.superset)),class:"text-center mb-3","max-width":"344"},{default:(0,n.k6)((()=>[(0,n.bF)(d,null,{default:(0,n.k6)((()=>[(0,n.Lk)("div",null,[e.is1stLevelStakeholdersMode?((0,n.uX)(),(0,n.CE)("b",yt,[(0,n.bF)(c,{queries:[e.state.searchInput]},{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(e.getStakeholderName(e.superset.stakeholder)),1)])),_:1},8,["queries"])])):((0,n.uX)(),(0,n.CE)("b",kt,[(0,n.bF)(c,{queries:[e.state.searchInput]},{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(e.superset.property),1)])),_:1},8,["queries"])]))]),(0,n.Lk)("div",{class:(0,l.C4)(1===e.superset.subOption?"green--text":"red--text")},[(0,n.bF)(c,{queries:[e.state.searchInput]},{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(e.superset.value),1)])),_:1},8,["queries"])],2),(0,n.bF)(u,{outlined:"","x-small":""},{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(e.items.length),1)])),_:1})])),_:1}),(0,n.Lk)("div",Et,[(0,n.Lk)("div",St,[e.findSuperset(e.superset)?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(m,{key:0,onClick:t[0]||(t[0]=(0,a.D$)((t=>e.addSupersetInSelection(e.superset)),["stop"])),text:"",icon:"",small:""},{default:(0,n.k6)((()=>[(0,n.bF)(p,{"x-small":""},{default:(0,n.k6)((()=>t[3]||(t[3]=[(0,n.eW)("mdi-plus-circle-outline")]))),_:1})])),_:1})),e.findSuperset(e.superset)?((0,n.uX)(),(0,n.Wv)(m,{key:1,onClick:t[1]||(t[1]=(0,a.D$)((t=>e.removeSupersetInSelection(e.superset)),["stop"])),text:"",icon:"",small:"",color:"secondary"},{default:(0,n.k6)((()=>[(0,n.bF)(p,{"x-small":""},{default:(0,n.k6)((()=>t[4]||(t[4]=[(0,n.eW)("mdi-plus-circle")]))),_:1})])),_:1})):(0,n.Q3)("",!0)]),e.condition?((0,n.uX)(),(0,n.CE)("small",_t,(0,l.v_)(e.condition),1)):(0,n.Q3)("",!0)])])),_:1})}var Ft=(0,n.pM)({setup(){return{state:b,addSupersetInSelection:ts,removeSupersetInSelection:rs,getItemsBy:Pl,toggleSuperset:es,findSuperset:as,getStakeholderName:zl,is1stLevelStakeholdersMode:L}},computed:{items:function(){return L.value?Pl({stakeholder:this.superset.stakeholder,alternative:this.superset.alternative,subOption:this.superset.subOption,aim:this.superset.aim,criterion:this.superset.criterion}):Pl({property:this.superset.property,value:this.superset.value,alternative:this.superset.alternative,subOption:this.superset.subOption,aim:this.superset.aim,criterion:this.superset.criterion})},condition:function(){return this.items.reduce(((e,t)=>t.condition?e.length?e+", "+t.condition:e+t.condition:e),"")}},props:["superset","label"]});const wt=(0,Y.A)(Ft,[["render",Ct]]);var xt=wt,It=(0,n.pM)({setup(){return{is1stLevelStakeholdersMode:L}},components:{TableListCard:xt},methods:{getLabels:function(){return(0,bt.sortBy)(ps({alternative:this.alternativeId,subOption:this.subOptionId,aim:this.aim.id,criterion:this.criterionId}),"property")},getItems:function(){return Rl({alternative:this.alternativeId,subOption:this.subOptionId,aim:this.aim.id,criterion:this.criterionId})},getCardsByStakeholder:function(){return Vl({alternative:this.alternativeId,subOption:this.subOptionId,aim:this.aim.id,criterion:this.criterionId},"stakeholder")}},props:["alternativeId","subOptionId","aim","criterionId"]});const Lt=(0,Y.A)(It,[["render",gt]]);var Ot=Lt;const jt={root:null,container:null,yEnd:null,xStart:null,xEnd:null,yStart:null,xShadow:null,yShadow:null},At={container:null,yStart:null,yEnd:null,xStart:null},Wt=function(e,t,r){const a=new IntersectionObserver(r,{root:jt.root,rootMargin:t,threshold:[1]});a.observe(e)},Xt=()=>{At.root=jt.root.getBoundingClientRect(),At.container=jt.container.getBoundingClientRect(),At.xStart=jt.xStart.getBoundingClientRect(),At.xEnd=jt.xEnd.getBoundingClientRect(),At.yStart=jt.yStart.getBoundingClientRect(),At.yEnd=jt.yEnd.getBoundingClientRect()},Tt=()=>{jt.root=document.querySelector(".tablelist"),jt.container=document.querySelector(".tablelist-container"),jt.xStart=document.querySelector(".tablelist tbody td[criterion]"),jt.xEnd=document.querySelector(".tablelist tbody td[aim]"),jt.yStart=document.querySelector(".tablelist thead th[criterion]"),jt.yEnd=document.querySelector(".tablelist tfoot th[criterion-aim]"),jt.xShadow=document.querySelector(".tablelist-x-shadow"),jt.yShadow=document.querySelector(".tablelist-y-shadow")},Pt=()=>{jt.yShadow&&jt.yShadow.setAttribute("style",`top:${At.yStart.bottom-1}px; left:${At.yStart.left}px; width:calc(100% - ${2*At.yStart.left}px);`)},Dt=()=>{jt.xShadow&&jt.xShadow.setAttribute("style",`left:${At.xEnd.right}px;  height:${At.yEnd.top-At.container.top}px; top:${At.container.top}px;`)},Rt=()=>{jt.yStart&&Wt(jt.yStart,"-1px 0px 0px 1px",(([e])=>{jt.yShadow&&(jt.yShadow.classList.toggle("is-pinned",e.intersectionRatio>=1),Pt())})),jt.xStart&&Wt(jt.xStart,"-1px 0px 0px -1px",(([e])=>{jt.xShadow&&(jt.xShadow.classList.toggle("is-pinned",e.intersectionRatio>=1),Dt())}))},Nt=()=>{Xt(),Pt(),Dt()},$t=()=>{Tt(),Xt(),Rt()};var Bt=(0,n.pM)({setup(){return{state:b,sortBy:bt.sortBy,getAimsBy:El,setStickyTable:$t,handleStickyTableResize:Nt,clearAppFilters:_,c_criterionsIds:Ll,getFilteredCriterions:(0,n.EW)((()=>Al())),subOptionsIds:(0,n.EW)((()=>Ml())),alternativesIds:(0,n.EW)((()=>ml())),criterionsIds:(0,n.EW)((()=>Il())),aimsIds:(0,n.EW)((()=>bl())),getAlternatives:(0,n.EW)((()=>dl())),getSubOptions:(0,n.EW)((()=>Hl())),getFilteredItems:(0,n.EW)((()=>Xl())),getFilteredAims:(0,n.EW)((()=>_l())),project:(0,n.EW)((()=>b.project))}},mounted(){this.$nextTick($t)},created(){window.addEventListener("resize",this.handleStickyTableResize)},destroyed(){window.removeEventListener("resize",this.handleStickyTableResize)},watch:{},components:{TableListCriterion:ft,TableListHead:Ae,TableListFoot:Ue,TableListAlternative:Ot,TableListAim:ct}});const qt=(0,Y.A)(Bt,[["render",we]]);var Vt=qt;function Ht(e,t,r,l,s,o){const i=(0,n.g2)("v-icon"),c=(0,n.g2)("v-btn"),u=(0,n.g2)("v-tooltip"),d=(0,n.g2)("v-list-item-title"),p=(0,n.g2)("v-list-item"),m=(0,n.g2)("v-list"),h=(0,n.g2)("v-menu"),v=(0,n.g2)("v-btn-toggle"),f=(0,n.g2)("v-select"),g=(0,n.g2)("v-toolbar"),b=(0,n.g2)("v-row"),y=(0,n.g2)("v-col"),k=(0,n.g2)("v-autocomplete"),E=(0,n.g2)("v-text-field");return(0,n.uX)(),(0,n.Wv)(b,{"table-filters":""},{default:(0,n.k6)((()=>[(0,n.bF)(y,{class:"flex-grow-0",style:{"align-self":"center"}},{default:(0,n.k6)((()=>[(0,n.bF)(b,null,{default:(0,n.k6)((()=>[(0,n.bF)(g,{color:"transparent",flat:""},{default:(0,n.k6)((()=>[(0,n.bF)(v,{light:"",color:"transparent","background-color":"transparent",onChange:e.switchToView,mandatory:"",value:e.$router.currentRoute.name},{default:(0,n.k6)((()=>[(0,n.bF)(h,{"offset-y":"",bottom:""},{activator:(0,n.k6)((({on:r,attrs:a})=>[(0,n.bF)(u,{top:""},{activator:(0,n.k6)((({on:l})=>[(0,n.bF)(c,(0,n.v6)({color:(e.$router.currentRoute.name,"")},(0,n.Tb)(l||{}),a,{value:"global-view"}),{default:(0,n.k6)((()=>[(0,n.bF)(i,{color:"global-view"===e.$router.currentRoute.name?"primary":"grey"},{default:(0,n.k6)((()=>t[6]||(t[6]=[(0,n.eW)("mdi-table")]))),_:1},8,["color"]),(0,n.bF)(c,(0,n.v6)({"x-small":"",icon:"",color:"transparent",value:"global-view"},(0,n.Tb)(r||{}),a),{default:(0,n.k6)((()=>[(0,n.bF)(i,{color:"global-view"===e.$router.currentRoute.name?"primary":"grey"},{default:(0,n.k6)((()=>t[7]||(t[7]=[(0,n.eW)("mdi-chevron-down")]))),_:1},8,["color"])])),_:2},1040)])),_:2},1040,["color"])])),default:(0,n.k6)((()=>[t[8]||(t[8]=(0,n.Lk)("span",null,"Global view",-1))])),_:2},1024)])),default:(0,n.k6)((()=>[(0,n.bF)(m,null,{default:(0,n.k6)((()=>[e.is1stLevelStakeholdersMode?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(p,{key:0,onClick:t[0]||(t[0]=t=>e.state.globalCardType="stakeholder")},{default:(0,n.k6)((()=>[(0,n.bF)(d,null,{default:(0,n.k6)((()=>t[9]||(t[9]=[(0,n.eW)("By Stakeholder")]))),_:1})])),_:1})),e.is1stLevelStakeholdersMode?((0,n.uX)(),(0,n.Wv)(p,{key:1,onClick:t[1]||(t[1]=t=>e.state.globalCardType="label")},{default:(0,n.k6)((()=>[(0,n.bF)(d,null,{default:(0,n.k6)((()=>t[10]||(t[10]=[(0,n.eW)("By Label")]))),_:1})])),_:1})):(0,n.Q3)("",!0)])),_:1})])),_:1}),(0,n.bF)(u,{top:""},{activator:(0,n.k6)((({on:r})=>[(0,n.bF)(c,(0,n.v6)({text:"",color:(e.$router.currentRoute.name,"")},(0,n.Tb)(r),{value:"stakeholder-view"}),{default:(0,n.k6)((()=>[(0,n.bF)(i,{color:"stakeholder-view"===e.$router.currentRoute.name?"primary":"grey"},{default:(0,n.k6)((()=>t[11]||(t[11]=[(0,n.eW)("mdi-account-multiple")]))),_:1},8,["color"])])),_:2},1040,["color"])])),default:(0,n.k6)((()=>[t[12]||(t[12]=(0,n.Lk)("span",null,"Stakeholder view",-1))])),_:1}),(0,n.bF)(u,{top:""},{activator:(0,n.k6)((({on:r})=>[(0,n.bF)(c,(0,n.v6)({text:"",color:(e.$router.currentRoute.name,"")},(0,n.Tb)(r),{value:"property-view"}),{default:(0,n.k6)((()=>[(0,n.bF)(i,{color:"property-view"===e.$router.currentRoute.name?"primary":"grey"},{default:(0,n.k6)((()=>t[13]||(t[13]=[(0,n.eW)("mdi-format-list-bulleted")]))),_:1},8,["color"])])),_:2},1040,["color"])])),default:(0,n.k6)((()=>[t[14]||(t[14]=(0,n.Lk)("span",null,"Property view",-1))])),_:1})])),_:1},8,["onChange","value"]),(0,n.bF)(f,{items:e.getSelectModes,modelValue:e.state.mode,"onUpdate:modelValue":t[2]||(t[2]=t=>e.state.mode=t),"hide-selected":"",label:"Select mode","hide-details":"",solo:"",style:{"min-width":"200px"},class:"ml-6 flex-grow-1"},null,8,["items","modelValue"])])),_:1})])),_:1})])),_:1}),(0,n.bF)(y,{class:"py-0 px-6"},{default:(0,n.k6)((()=>[(0,n.bF)(b,null,{default:(0,n.k6)((()=>[(0,n.bF)(y,null,{default:(0,n.k6)((()=>[(0,n.bF)(k,{clearable:"",flat:"","item-color":"secondary",color:"secondary",label:"Stakeholders",modelValue:e.state.selectedStakeholders,"onUpdate:modelValue":t[3]||(t[3]=t=>e.state.selectedStakeholders=t),items:e.orderByPropName(e.getSelectStakeholders,"text"),multiple:"",hint:`${e.state.selectedStakeholders.length}/${e.getSelectStakeholders.length}`,"persistent-hint":"",autocomplete:"off",id:"selected-stakeholders"},null,8,["modelValue","items","hint"])])),_:1}),(0,n.bF)(y,null,{default:(0,n.k6)((()=>[(0,n.bF)(k,{clearable:"",flat:"","item-color":"secondary",color:"secondary",label:"Criteria",modelValue:e.state.selectedCriterions,"onUpdate:modelValue":t[4]||(t[4]=t=>e.state.selectedCriterions=t),items:e.orderByPropName(e.getSelectCriterions,"text"),multiple:"",hint:`${e.state.selectedCriterions.length}/${e.getSelectCriterions.length}`,"persistent-hint":"",autocomplete:"off",id:"selected-criteria"},null,8,["modelValue","items","hint"])])),_:1}),(0,n.bF)(y,null,{default:(0,n.k6)((()=>[(0,n.bF)(k,{clearable:"",flat:"","item-color":"secondary",color:"secondary",label:"Aims",modelValue:e.state.selectedAims,"onUpdate:modelValue":t[5]||(t[5]=t=>e.state.selectedAims=t),items:e.orderByPropName(e.getSelectAims,"text"),hint:`${e.state.selectedAims.length}/${e.getSelectAims.length}`,"persistent-hint":"",multiple:"",autocomplete:"off",id:"selected-aims"},null,8,["modelValue","items","hint"])])),_:1})])),_:1})])),_:1}),(0,n.bF)(y,{class:"flex-grow-0",style:{"min-width":"200px"}},{default:(0,n.k6)((()=>[(0,n.bF)(E,{flat:"","item-color":"secondary",color:"secondary",label:"Search",value:e.state.searchInput,onInput:e.debounceInput},{default:(0,n.k6)((()=>[(0,n.bo)((0,n.bF)(i,{onClick:e.clearSearch,slot:"append"},{default:(0,n.k6)((()=>t[15]||(t[15]=[(0,n.eW)("mdi-close")]))),_:1},8,["onClick"]),[[a.aG,e.state.searchInput]]),(0,n.bF)(i,{slot:"append"},{default:(0,n.k6)((()=>t[16]||(t[16]=[(0,n.eW)("mdi-magnify")]))),_:1})])),_:1},8,["value","onInput"])])),_:1})])),_:1})}var Mt=(0,n.pM)({setup(){return{state:b,clearSearch:()=>{b.searchInput=""},switchToView:function(e){return ea(e)},debounceInput:(0,bt.debounce)((e=>{b.searchInput=e}),200),orderByPropName:ba,is1stLevelStakeholdersMode:L,getSelectModes:(0,n.EW)((()=>fs())),getAllItems:(0,n.EW)((()=>Wl())),getSelectStakeholders:(0,n.EW)((()=>ms())),getSelectAims:(0,n.EW)((()=>hs())),getSelectCriterions:(0,n.EW)((()=>vs())),getFilteredItems:(0,n.EW)((()=>Xl())),mode:(0,n.EW)((()=>b.mode))}},watch:{async mode(){await ul(this.$router.currentRoute.value,!1)}}});const Gt=(0,Y.A)(Mt,[["render",Ht]]);var Ut=Gt;const Qt={class:"d-flex",style:{background:"rgba(0,0,0,.7)",position:"relative"}},zt={class:"mr-auto zi-front"},Kt={class:"mx-4 my-4 zi-front"},Jt={class:"mt-0 mb-3 d-flex"},Yt={class:"mr-auto"},Zt={style:{"margin-bottom":"-.33em"},class:"title d-flex text--primary"},er={key:0};function tr(e,t,r,a,s,o){const i=(0,n.g2)("v-card-title"),c=(0,n.g2)("v-card-subtitle"),u=(0,n.g2)("v-icon"),d=(0,n.g2)("v-card-text"),p=(0,n.g2)("v-divider"),m=(0,n.g2)("v-list-subheader"),h=(0,n.g2)("superset-card-item"),v=(0,n.g2)("v-btn"),f=(0,n.g2)("v-card-actions"),g=(0,n.g2)("v-card");return(0,n.uX)(),(0,n.Wv)(g,{superset:"",class:"superset-card"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",Qt,[(0,n.Lk)("div",{class:"card-background",style:(0,l.Tr)(`background-image: url(${e.getImagePath(e.state.data.alternatives[e.superset.alternative].image)}); background-size: cover;`)},null,4),(0,n.Lk)("div",zt,[(0,n.bF)(i,{class:"subtitle-2 white--text text-uppercase"},{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(e.getAlternativeName(e.superset.alternative)),1)])),_:1}),(0,n.bF)(c,{class:"font-weight-light white--text"},{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(e.getCriterionName(e.superset.criterion)),1)])),_:1})]),(0,n.Lk)("div",Kt,[e.state.data?((0,n.uX)(),(0,n.Wv)(u,{key:0,color:"white"},{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(e.state.data.alternatives[e.superset.alternative].icon),1)])),_:1})):(0,n.Q3)("",!0)])]),(0,n.bF)(d,null,{default:(0,n.k6)((()=>[(0,n.Lk)("div",Jt,[(0,n.Lk)("span",Yt,(0,l.v_)(e.getAimName(e.superset.aim)),1),(0,n.bF)(u,{class:"ml-2",small:""},{default:(0,n.k6)((()=>t[3]||(t[3]=[(0,n.eW)("mdi-bullseye-arrow")]))),_:1})]),(0,n.Lk)("div",null,[(0,n.Lk)("div",Zt,[e.is1stLevelStakeholdersMode?((0,n.uX)(),(0,n.CE)("b",er,(0,l.v_)(e.getStakeholderName(e.superset.stakeholder)),1)):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.Lk)("b",null,(0,l.v_)(e.superset.property),1),(0,n.bF)(u,{color:1===e.superset.subOption?"green":"red",class:"ml-auto"},{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(e.state.icons.subOption[e.superset.subOption]),1)])),_:1},8,["color"])],64))]),e.is1stLevelStakeholdersMode?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",{key:0,class:(0,l.C4)("title font-weight-regular\t  "+(1===e.superset.subOption?"green--text":"red--text"))},(0,l.v_)(e.superset.value),3))])])),_:1}),(0,n.bF)(p,{class:"my-1"}),(0,n.bF)(d,null,{default:(0,n.k6)((()=>[(0,n.bF)(m,{class:"px-0",textContent:(0,l.v_)(`Arguments (${e.supersetItems.length})`)},null,8,["textContent"]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.duplicateGroups,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:"mb-5 no-mb-last"},[(0,n.bF)(h,{item:e[0],index:t,duplicatesCount:e.length},null,8,["item","index","duplicatesCount"])])))),128))])),_:1}),(0,n.bF)(p),(0,n.bF)(f,null,{default:(0,n.k6)((()=>[e.findSuperset(e.superset)||e.compare?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(v,{key:0,onClick:t[0]||(t[0]=t=>e.addSupersetInSelection(e.superset)),class:"mr-auto",text:"",icon:""},{default:(0,n.k6)((()=>[(0,n.bF)(u,null,{default:(0,n.k6)((()=>t[4]||(t[4]=[(0,n.eW)("mdi-plus-circle-outline")]))),_:1})])),_:1})),e.findSuperset(e.superset)?((0,n.uX)(),(0,n.Wv)(v,{key:1,class:(0,l.C4)(e.compare?"mx-auto":"mr-auto"),color:"secondary",onClick:t[1]||(t[1]=t=>e.removeSupersetInSelection(e.superset)),text:"",icon:""},{default:(0,n.k6)((()=>[(0,n.bF)(u,null,{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(e.compare?"mdi-close":"mdi-plus-circle"),1)])),_:1})])),_:1},8,["class"])):(0,n.Q3)("",!0),e.compare?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(v,{key:2,onClick:t[2]||(t[2]=t=>e.unselectSuperset(e.superset)),text:"",icon:""},{default:(0,n.k6)((()=>[(0,n.bF)(u,null,{default:(0,n.k6)((()=>t[5]||(t[5]=[(0,n.eW)("mdi-close")]))),_:1})])),_:1}))])),_:1})])),_:1})}const rr={class:"d-flex"},ar={class:"mb-5 overflow-hidden"},nr={key:0},lr={key:1},sr={key:1},or={class:"ml-auto flex-shrink-0"},ir={key:0,class:"text--secondary body-1"},cr={class:"mb-5 body-1"},ur={class:"body-1 text--secondary"},dr={key:0,class:"text-right text--secondary caption"};function pr(e,t,r,s,o,i){const c=(0,n.g2)("v-chip"),u=(0,n.g2)("v-icon"),d=(0,n.g2)("v-btn"),p=(0,n.g2)("v-expand-transition"),m=(0,n.g2)("v-container"),h=(0,n.g2)("v-card");return(0,n.uX)(),(0,n.Wv)(h,{ripple:!1,outlined:"",onClick:t[0]||(t[0]=t=>e.openMe(e.index))},{default:(0,n.k6)((()=>[(0,n.bF)(m,{fluid:""},{default:(0,n.k6)((()=>[(0,n.Lk)("div",rr,[(0,n.Lk)("div",ar,[(0,n.Lk)("div",{class:(0,l.C4)("caption "+(e.open[e.index]?"":"text-truncate"))},[e.is1stLevelStakeholdersMode?((0,n.uX)(),(0,n.CE)("b",nr,(0,l.v_)(e.item.property),1)):((0,n.uX)(),(0,n.CE)("b",lr,"by "+(0,l.v_)(e.getStakeholderName(e.item.stakeholder)),1))],2),(0,n.Lk)("div",{class:(0,l.C4)("caption "+(e.open[e.index]?"":"text-truncate"))},[e.is1stLevelStakeholdersMode?((0,n.uX)(),(0,n.CE)("span",{key:0,class:(0,l.C4)("font-weight-regular\t  "+(1===e.item.subOption?"green--text":"red--text"))},(0,l.v_)(e.item.value),3)):((0,n.uX)(),(0,n.CE)("em",sr,"in "+(0,l.v_)(e.item.source),1))],2)]),(0,n.Lk)("div",or,[(0,n.bF)(c,{outlined:"","x-small":""},{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(e.duplicatesCount),1)])),_:1}),(0,n.bF)(d,{icon:""},{default:(0,n.k6)((()=>[(0,n.bF)(u,null,{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(e.open[e.index]?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})])),_:1})])]),e.open[e.index]?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",ir,(0,l.v_)(e.item.assertion),1)),(0,n.bF)(p,null,{default:(0,n.k6)((()=>[(0,n.bo)((0,n.Lk)("div",null,[t[1]||(t[1]=(0,n.Lk)("div",{class:"overline"},"Explanation",-1)),(0,n.Lk)("p",cr,(0,l.v_)(e.item.explanation),1),t[2]||(t[2]=(0,n.Lk)("div",{class:"overline"},"Assertion",-1)),(0,n.Lk)("p",ur,(0,l.v_)(e.item.assertion),1),e.item.date?((0,n.uX)(),(0,n.CE)("div",dr,[(0,n.Lk)("small",null,(0,l.v_)(e.formatDate(e.item.date)),1)])):(0,n.Q3)("",!0)],512),[[a.aG,e.open[e.index]]])])),_:1})])),_:1})])),_:1})}r(1701);var mr=(0,n.pM)({setup(){return{state:b,getImagePath:C,openMe(e){this.open[e]=!this.open[e]},addSupersetInSelection:ts,removeSupersetInSelection:rs,unselectSuperset:Zl,findSuperset:as,getItemsBy:Pl,getCriterionById:Ol,getAlternativeName:fl,getCriterionName:jl,getStakeholderName:zl,getAimName:Sl,formatDate:fa,is1stLevelStakeholdersMode:L}},props:["item","index","duplicatesCount"],data:()=>({open:[!1]}),computed:{supersetItems:function(){return Pl(this.superset)}},mounted(){this.open=this.supersetItems.map((()=>!1))}});const hr=(0,Y.A)(mr,[["render",pr]]);var vr=hr,fr=(0,n.pM)({setup(){return{state:b,getImagePath:C,addSupersetInSelection:ts,removeSupersetInSelection:rs,unselectSuperset:Zl,findSuperset:as,getItemsBy:Pl,getCriterionById:Ol,getAlternativeName:fl,getCriterionName:jl,getStakeholderName:zl,getAimName:Sl,formatDate:fa,is1stLevelStakeholdersMode:L}},components:{SupersetCardItem:vr},props:["superset","compare"],computed:{supersetItems:function(){return Pl(this.superset)},duplicateGroups:function(){return Dl(this.supersetItems)}},mounted(){}});const gr=(0,Y.A)(fr,[["render",tr]]);var br=gr,yr=(0,n.pM)({setup(){return{state:b,selectedSupersets:O,getFilteredItems:(0,n.EW)((()=>Xl())),getAllItems:(0,n.EW)((()=>Wl())),removeSupersetInSelection:rs}},components:{Header:Ut,TableList:Vt,SupersetCard:br}});const kr=(0,Y.A)(yr,[["render",Ee]]);var Er=kr;function Sr(e,t,r,a,s,o){const i=(0,n.g2)("Header"),c=(0,n.g2)("PropertyListRow"),u=(0,n.g2)("v-simple-table"),d=(0,n.g2)("v-card"),p=(0,n.g2)("v-container");return e.state.project&&e.state.data?((0,n.uX)(),(0,n.Wv)(p,{key:0,fluid:""},{default:(0,n.k6)((()=>[(0,n.bF)(i),(0,n.bF)(d,{class:"mt-2"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{class:"properties-table","fixed-header":"",height:e.height},{default:(0,n.k6)((()=>[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[t[0]||(t[0]=(0,n.Lk)("th",null,"Property",-1)),t[1]||(t[1]=(0,n.Lk)("th",null,"Criterion",-1)),t[2]||(t[2]=(0,n.Lk)("th",null,"Aim",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.c_alternativesIds,((t,r)=>((0,n.uX)(),(0,n.CE)("th",{class:"text-center",key:r},(0,l.v_)(e.getAlternativeById(t).name),1)))),128))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.getNormalizedItemsByUniqueItemProp("property"),((e,t)=>((0,n.uX)(),(0,n.Wv)(c,{key:t,items:e,property:t},null,8,["items","property"])))),128))])])),_:1},8,["height"])])),_:1})])),_:1})):(0,n.Q3)("",!0)}const _r=["name","id"],Cr={key:0,class:"grey--text"},Fr={key:0,class:"grey--text"},wr={key:0,class:"text-center"};function xr(e,t,r,a,s,o){const i=(0,n.g2)("text-highlight"),c=(0,n.g2)("v-icon"),u=(0,n.g2)("PropertiesListCriterion"),d=(0,n.g2)("Acceptability");return(0,n.uX)(),(0,n.CE)("tr",{onClick:t[0]||(t[0]=t=>e.hasMany?e.showDetails=!e.showDetails:""),key:`${e.property}-${e.criterionItems.length}-${e.aimItems.length}`},[(0,n.Lk)("td",null,[(0,n.Lk)("a",{name:`${e.property}`,id:e.property},null,8,_r),(0,n.Lk)("b",null,[(0,n.bF)(i,{queries:[e.state.searchInput]},{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(e.property),1)])),_:1},8,["queries"])]),e.criterionItems.length>1||e.aimItems.length>1?((0,n.uX)(),(0,n.Wv)(c,{key:0},{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(e.showDetails?"mdi-chevron-up":"mdi-chevron-down"),1)])),_:1})):(0,n.Q3)("",!0)]),(0,n.Lk)("td",null,[e.criterionItems.length>1&&!e.showDetails?((0,n.uX)(),(0,n.CE)("div",Cr,(0,l.v_)(e.criterionItems.length)+" criteria ",1)):(0,n.Q3)("",!0),e.criterionItems.length<=1||e.criterionItems.length>1&&e.showDetails?((0,n.uX)(!0),(0,n.CE)(n.FK,{key:1},(0,n.pI)(e.criterionItems,((t,r)=>((0,n.uX)(),(0,n.Wv)(u,{key:r,item:t,row:e.getAimsCountFromAimsAndCriterion(e.getAimsFromItems(e.items),t.criterion)},null,8,["item","row"])))),128)):(0,n.Q3)("",!0)]),(0,n.Lk)("td",null,[e.aimItems.length>1&&!e.showDetails?((0,n.uX)(),(0,n.CE)("div",Fr,(0,l.v_)(e.aimItems.length)+" aims",1)):(0,n.Q3)("",!0),e.aimItems.length<=1||e.aimItems.length>1&&e.showDetails?((0,n.uX)(!0),(0,n.CE)(n.FK,{key:1},(0,n.pI)(e.aimItems,((t,r)=>((0,n.uX)(),(0,n.CE)("div",{key:r},(0,l.v_)(e.getAimById(t.aim).name),1)))),128)):(0,n.Q3)("",!0)]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.c_alternativesIds,((t,r)=>((0,n.uX)(),(0,n.CE)("td",{key:r},[e.showDetails?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",wr,[(0,n.bF)(d,{items:e.filterItemsBy(e.items,{alternative:t})},null,8,["items"])])),e.showDetails?((0,n.uX)(!0),(0,n.CE)(n.FK,{key:1},(0,n.pI)(e.aimItems,((r,a)=>((0,n.uX)(),(0,n.CE)("div",{class:"text-center",key:a},[(0,n.bF)(d,{items:e.filterItemsBy(e.items,{alternative:t,aim:r.aim})},null,8,["items"])])))),128)):(0,n.Q3)("",!0)])))),128))])}function Ir(e,t,r,a,s,o){return(0,n.uX)(),(0,n.CE)("div",null,(0,l.v_)(e.getCriterionById(e.item.criterion).name),1)}var Lr=(0,n.pM)({props:{item:{},row:{}},setup(){return{getCriterionById:Ol}}});const Or=(0,Y.A)(Lr,[["render",Ir]]);var jr=Or,Ar=(0,n.pM)({props:{items:Array,property:{}},setup(e){const{items:t,property:r}=(0,v.QW)(e),a=(0,v.KR)(!1),l=(0,n.EW)((()=>(0,bt.uniqBy)(t.value,"criterion"))),s=(0,n.EW)((()=>(0,bt.uniqBy)(t.value,"aim"))),o=(0,n.EW)((()=>l.value.length>1||s.value.length>1));return{state:b,c_alternativesIds:hl,showDetails:a,criterionItems:l,aimItems:s,hasMany:o,getAimsCountFromAimsAndCriterion:Fl,getAimsFromItems:Cl,countBy:bt.countBy,sortBy:bt.sortBy,getSubOptionById:Gl,getCriterionById:Ol,getAimById:kl,getAcceptabilityFromProCon:is,normalizeByAlternative:$l,filterItemsBy:Tl,uniqBy:bt.uniqBy}},components:{Acceptability:st,PropertiesListCriterion:jr}});const Wr=(0,Y.A)(Ar,[["render",xr]]);var Xr=Wr,Tr=(0,n.pM)({setup(e){const t=(0,v.KR)(null);return{state:b,height:t,c_alternativesIds:hl,setHeight:()=>{const e=document.querySelector("[table-filters]");if(e){const r=e.getBoundingClientRect();t.value=window.innerHeight-r.bottom-24}},getNormalizedItemsByUniqueItemProp:ql,getAlternativeById:vl}},components:{Header:Ut,PropertyListRow:Xr},mounted(){this.$nextTick(this.setHeight)},updated(){this.$nextTick(this.setHeight)},created(){window.addEventListener("resize",this.setHeight)},destroyed(){window.removeEventListener("resize",this.setHeight)}});const Pr=(0,Y.A)(Tr,[["render",Sr]]);var Dr=Pr;function Rr(e,t,r,a,s,o){const i=(0,n.g2)("Header"),c=(0,n.g2)("StakeholderListRow"),u=(0,n.g2)("v-simple-table"),d=(0,n.g2)("v-card"),p=(0,n.g2)("v-container");return e.state.project&&e.state.data?((0,n.uX)(),(0,n.Wv)(p,{key:0,fluid:""},{default:(0,n.k6)((()=>[(0,n.bF)(i),(0,n.bF)(d,{class:"mt-2"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{class:"properties-table","fixed-header":"",height:e.height},{default:(0,n.k6)((()=>[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[t[0]||(t[0]=(0,n.Lk)("th",{criterion:""},"Criterion",-1)),t[1]||(t[1]=(0,n.Lk)("th",{aim:""},"Aim",-1)),t[2]||(t[2]=(0,n.Lk)("th",{stakeholder:""},"Stakeholder",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.c_alternativesIds,((t,r)=>((0,n.uX)(),(0,n.CE)("th",{alternative:"",class:"text-center",key:r},(0,l.v_)(e.getAlternativeById(t).name),1)))),128))])]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.getNormalizedItemsByUniqueItemProp("criterion"),((t,r)=>((0,n.uX)(),(0,n.Wv)(c,{key:r,items:t,property:e.getCriterionName(r)},null,8,["items","property"])))),128))])),_:1},8,["height"])])),_:1})])),_:1})):(0,n.Q3)("",!0)}const Nr=["rowspan"],$r=["name","id"],Br=["rowspan"],qr={stakeholder:""};function Vr(e,t,r,a,s,o){const i=(0,n.g2)("text-highlight"),c=(0,n.g2)("Acceptability");return(0,n.uX)(),(0,n.CE)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.aimItems,((t,r)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.uniqBy(e.filterItemsBy(e.items,{aim:t.aim}),"stakeholder"),((a,s)=>((0,n.uX)(),(0,n.CE)("tr",{key:`stakeholder-${s}-${r}`},[0===r&&0===s?((0,n.uX)(),(0,n.CE)("td",{key:0,criterion:"",rowspan:e.uniqBy(e.filterItemsBy(e.items,{criterion:t.criterion}),"stakeholder").length*e.aimItems.length},[(0,n.Lk)("a",{name:`${e.property}`,id:e.property},null,8,$r),(0,n.bF)(i,{class:"inline-block",queries:[e.state.searchInput]},{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(e.property),1)])),_:1},8,["queries"])],8,Nr)):(0,n.Q3)("",!0),0===s?((0,n.uX)(),(0,n.CE)("td",{key:1,aim:"",rowspan:e.uniqBy(e.filterItemsBy(e.items,{aim:t.aim}),"stakeholder").length},[(0,n.Lk)("span",null,(0,l.v_)(e.getAimById(t.aim).name),1)],8,Br)):(0,n.Q3)("",!0),(0,n.Lk)("td",qr,[(0,n.Lk)("b",null,(0,l.v_)(e.getStakeholderName(a.stakeholder)),1)]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.c_alternativesIds,((r,l)=>((0,n.uX)(),(0,n.CE)("td",{class:"text-center",alternative:"",key:l},[(0,n.bF)(c,{items:e.filterItemsBy(e.items,{alternative:r,aim:t.aim,stakeholder:a.stakeholder})},null,8,["items"])])))),128))])))),128))],64)))),256))])}var Hr=(0,n.pM)({props:{items:Array,property:{}},setup(e){const{items:t,property:r}=(0,v.QW)(e),a=(0,n.EW)((()=>(0,bt.uniqBy)(t.value,"stakeholder"))),l=(0,n.EW)((()=>(0,bt.uniqBy)(t.value,"criterion"))),s=(0,n.EW)((()=>(0,bt.uniqBy)(t.value,"aim")));return{state:b,c_alternativesIds:hl,stakeholderItems:a,criterionItems:l,aimItems:s,hasMany:(0,n.EW)((()=>l.value.length>1||s.value.length>1)),getStakeholderName:zl,getAimsCountFromAimsAndCriterion:Fl,getAimsFromItems:Cl,countBy:bt.countBy,sortBy:bt.sortBy,getSubOptionById:Gl,getCriterionById:Ol,getAimById:kl,getAcceptabilityFromProCon:is,normalizeByAlternative:$l,filterItemsBy:Tl,uniqBy:bt.uniqBy}},components:{Acceptability:st}});const Mr=(0,Y.A)(Hr,[["render",Vr]]);var Gr=Mr,Ur=(0,n.pM)({props:{id:Number},setup(e){const t=(0,v.KR)(null);return{state:b,height:t,c_alternativesIds:hl,getCriterionName:jl,setHeight:()=>{const e=document.querySelector("[table-filters]");if(e){const r=e.getBoundingClientRect();t.value=window.innerHeight-r.bottom-24}},getNormalizedItemsByUniqueItemProp:ql,getAlternativeById:vl}},components:{Header:Ut,StakeholderListRow:Gr},mounted(){this.$nextTick(this.setHeight)},updated(){this.$nextTick(this.setHeight)},created(){window.addEventListener("resize",this.setHeight)},destroyed(){window.removeEventListener("resize",this.setHeight)}});const Qr=(0,Y.A)(Ur,[["render",Rr]]);var zr=Qr;const Kr=[{name:"home",path:"/",component:ve},{name:"global-view",path:"/project/global-view",component:Er},{name:"project",path:"/project/",component:ae},{name:"property-view",path:"/project/property-view",component:Dr,props:!0},{name:"stakeholder-view",path:"/project/stakeholder-view",component:zr,props:!0}],Jr=(0,P.aE)({history:(0,P.LA)("/"),routes:Kr});Jr.beforeEach((async(e,t,r)=>{j(),r()})),Jr.afterEach((async(e,t)=>{if(e.path.startsWith("/project")){const r=al(e),a=al(t),n=ll(e),l=ll(t),s=r===a&&n===l;s||await Yr()}else"string"===typeof e.meta?.title?Ea(e.meta.title):Ea("My Choice");A()}));const Yr=async()=>{const e=Jr.currentRoute.value;if(e.query[ta.ICO]||e.query[ta.GOOGLE_SPREADSHEET]||e.query[ta.NEXTCLOUD]||e.query["demo"])try{await ul(e)}catch(t){console.info("LOAD FAIL, RETRY WITHOUT CACHE!"),Un(e),await ul(e)}};var Zr=Jr;const ea=e=>{const t={name:e};Zr.push(t)};var ta;(function(e){e["ICO"]="name",e["GOOGLE_SPREADSHEET"]="spreadsheet",e["XLSX"]="xlsx",e["NEXTCLOUD"]="nextcloud"})(ta||(ta={}));const ra=ta.ICO,aa=ta.GOOGLE_SPREADSHEET,na=(ta.XLSX,ta.NEXTCLOUD),la=(0,n.EW)((()=>b.vm&&b.vm.$route&&b.vm.$route.query&&(b.vm.$route.query.name||b.vm.$route.query.spreadsheet)?b.vm.$route.query.name||b.vm.$route.query.spreadsheet:null)),sa=(0,n.EW)((()=>(0,bt.uniqBy)(b.notifications,"message"))),oa=()=>{const e=[];return Object.entries(b.errors).forEach((([t,r])=>{if(!1!==r)return e.push(t)})),e},ia=e=>b.errorMessages[e]||b.errors[e],ca=()=>{Object.keys(b.errors).forEach((e=>{b.errors[e]=!1}))};r(1148),r(116);var ua=r(4353),da=r.n(ua),pa=r(445),ma=r.n(pa);da().extend(ma());class ha extends Error{constructor(e,...t){super(...t),this.name=e,"function"===typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error(this.message).stack}}const va=(e,t)=>{b.errors[e]=t},fa=e=>da()(e,"DD/MM/YY").format("MMMM YYYY"),ga=function(e,t,r){let a=(e-t)/(r-t);return isFinite(a)||(a=e),a},ba=(e,t)=>e.sort(((e,r)=>e[t]>r[t]?1:-1)),ya=e=>Object.keys(e).sort().reduce(((t,r)=>(t[r]=e[r],t)),{}),ka=function(e,t,r="s"){let a=e;const n=/{([^:}]+)(?:(?::)([^}]+))?}/g;let l;while(null!==(l=n.exec(e))){if(l.index===n.lastIndex&&n.lastIndex++,void 0===l[2]){const e=new RegExp("\\{"+l[1]+"\\}","g");a=a.replace(e,`${t[l[1]]}`)}if(void 0!==l[2]){const e=l[1],n=l[2],s=t[n],o=new RegExp("\\{"+e+":"+n+"\\}","g");a=Number(s)>1&&t.plural?a.replace(o,`${t.plural}`):a.replace(o,`${e}${Number(s)>1?r:""}`)}}return a},Ea=e=>{document.title=e},Sa=r(5811),_a=async e=>{const t=await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${e}?key=AIzaSyDEksLxmlJt3Ru6Uv8qakqnCZ05ViwHZyA`),r=await t.json();return r},Ca=async e=>{try{const t=await _a(e),r=t.sheets,a=[],n={};r.forEach((t=>{n[t.properties.index]=t.properties.title,a.push(Sa.getWorksheet(e,t.properties.title,"AIzaSyDEksLxmlJt3Ru6Uv8qakqnCZ05ViwHZyA"))}));const l=await Promise.all(a);return l.map((({data:e},t)=>({data:e,title:n[t],index:t})))}catch(t){throw t}},Fa=(e,t)=>new Promise(((r,a)=>{let n=null;const l=t.every((t=>(n=t,!!Object.prototype.hasOwnProperty.call(e,t))));l?r(!0):a(n)})),wa=async e=>{const t={argument:["idArgument","assertion","explanation","date","nameStakeHolder","nameProperty","value","typeProCon","nameAlternative","nameCriterion","nameSource","aim","nameTypeSource","isProspective"],project:["nameProject"],alternative:["nameAlternative","iconAlternative"]},r=t[e.title],a=e.data[0];if(a)return await Fa(a,r).then((e=>e),(t=>{throw new ha("SPREADSHEET_ERROR",`On <b>${e.title}</b> sheet, the <b>${t}</b> column is missing or misspelled`)}));va("SPREADSHEET_ERROR",`No data found in the <b>${e.title}</b> sheet`)},xa=({spreadsheetId:e,item:t,worksheet:r,line:a,keys:n})=>{n.forEach(((e,n)=>{if(null===t[e])throw new ha("SPREADSHEET_ERROR",`On <b>${r.title}</b> sheet, the <b>${String(e)}</b> on line <b>${a}</b> is empty and must be filled`)}))},Ia=e=>{const t={};e.forEach((e=>{t[e.aim]?t[e.aim].includes(e.nameCriterion)||t[e.aim].push(e.nameCriterion):t[e.aim]=[e.nameCriterion]})),Object.entries(t).forEach((([e,t])=>{t.length>1&&va("SPREADSHEET_ERROR_"+e,`The <b>${e}</b> aim should be associated with only one criterion, but has been found in ${t.length} criteria : <b>${t.join("</b>, <b>")}</b>`)}))},La=async(e,t)=>{const r=e.find((e=>"argument"===e.title)),a=e[r.index].data,n=a.map((e=>Object.keys(e).reduce((function(t,r){try{t[r]=JSON.parse(e[r])}catch(a){t[r]=e[r]}return t}),{})));try{await wa(r),Ia(n)}catch(l){throw l}return n.map(((e,a)=>{const n=a+2;if("-"!==e.typeProCon&&"+"!==e.typeProCon)throw new ha("SPREADSHEET_ERROR",`On <b>${r.title}</b> sheet, the <b>typeProCon</b> on line <b>${n}</b> is <b>${e.typeProCon}</b> and should be <b>-</b> or <b>+</b> `);xa({spreadsheetId:t,item:e,worksheet:r,line:n,keys:["nameSource","idArgument","nameProperty","value","nameStakeHolder","nameAlternative","nameCriterion","aim","nameTypeSource"]});const l={id:e.idArgument,stakeholder:e["nameStakeHolder"],property:e["nameProperty"],favorable:"+"===e.typeProCon,alternative:e["nameAlternative"],criterion:e["nameCriterion"],source:e["nameSource"],sourceType:e["nameTypeSource"],value:e["value"],aim:e["aim"],date:e["date"]?e["date"].toString():null};return delete e.idArgument,delete e["nameStakeHolder"],delete e["nameProperty"],delete e.typeProCon,delete e["nameAlternative"],delete e["nameCriterion"],delete e["nameSource"],delete e["nameTypeSource"],delete e["value"],delete e["aim"],{...e,...l}}))},Oa=async e=>{const t=e.find((e=>"project"===e.title));try{await wa(t)}catch(m){throw m}const r=t.data[0],a=e.find((e=>"alternative"===e.title));try{await wa(a),a.data.forEach(((e,t)=>{const r=t+2;if(null===e.iconAlternative)throw new ha("SPREADSHEET_ERROR",`On <b>${a.title}</b> sheet, the <b>iconAlternative</b> on line <b>${r}</b> is <b>empty</b> and should be a valid icon name`)}))}catch(m){throw m}const n=a.data,l=n.map((e=>({name:e.nameAlternative,description:e.description,image:e.imageAlternative,icon:e.iconAlternative}))),s=e.find((e=>"hasexpertise"===e.title)),o=s.data,i=o.map((e=>({nameStakeHolder:e["nameStakeHolder"],nameCriterion:e["nameCriterion"]}))),c=e.find((e=>"typesource"===e.title)),u=c.data,d=u.map((e=>({fiability:e.fiability.toString(),nameTypeSource:e.nameTypeSource}))),p={name:r.nameProject,image:r.image,description:r.description,alternatives:l,expertiseEntities:i,sourceTypeEntities:d};return p},ja=async e=>{try{const t=await Ca(e),r=await La(t,e),a=await Oa(t);return{items:r,project:a}}catch(t){throw t}},Aa=e=>{const t=new RegExp("/spreadsheets/d/([a-zA-Z0-9-_]+)").exec(e);if(t){const e=t[1];return e}return e},Wa=e=>{const t=e,r={stakeholders:t.nameStakeholder,name:t.nameProject,aims:t.aim,criterions:t.nameCriterion,alternatives:t.alternatives.map((e=>{const t={name:e.nameAlternative,image:e.imageAlternative,icon:e.iconAlternative};return delete e.nameAlternative,{...e,...t}})),sourceTypeEntities:t.typeSource,expertiseEntities:t.hasExpertise};return delete t.typeSource,delete t.hasExpertise,delete t.nameStakeholder,delete t.aim,delete t.nameProject,delete t.nameCriterion,{...t,...r}},Xa=e=>e.map((e=>{const t={id:e.idArgument,stakeholder:e.nameStakeHolder,property:e.nameProperty,favorable:e.typeProCon,alternative:e.nameAlternative,criterion:e.nameCriterion,source:e.nameSource,sourceType:e.nameTypeSource};return delete e.idArgument,delete e.nameStakeHolder,delete e.nameProperty,delete e.typeProCon,delete e.nameAlternative,delete e.nameCriterion,delete e.nameSource,delete e.nameTypeSource,{...e,...t}})),Ta=()=>{const e={id:{csv:"idArgument",server:"idArgument",spreadsheet:"idArgument"},aim:{csv:"aim.description",server:"aim",spreadsheet:"aim"},alternative:{csv:"alternative.nameAlternative",server:"nameAlternative",spreadsheet:"nameAlternative"},assertion:{csv:"assertion",server:"assertion",spreadsheet:"assertion"},criterion:{csv:"criterion.nameCriterion",server:"nameCriterion",spreadsheet:"nameCriterion"},date:{csv:"date",server:"date",spreadsheet:"date"},explanation:{csv:"explanation",server:"explanation",spreadsheet:"explanation"},favorable:{csv:"typeProCon",server:"typeProCon",spreadsheet:"typeProCon"},isProspective:{csv:"isProspective",server:"isProspective",spreadsheet:"isProspective"},property:{csv:"property.nameProperty",server:"nameProperty",spreadsheet:"nameProperty"},source:{csv:"source.nameSource",server:"nameSource",spreadsheet:"nameSource"},sourceType:{csv:"typesource.nameTypeSource",server:"nameTypeSource",spreadsheet:"nameTypeSource"},stakeholder:{csv:"stakeholder.nameStakeholder",server:"nameStakeHolder",spreadsheet:"nameStakeHolder"},value:{csv:"qualvalue.qualValue",server:"value",spreadsheet:"value"},condition:{csv:"condition",server:"condition",spreadsheet:"condition"}};return e},Pa=(e,t)=>(0,bt.findKey)(Ta(),(function(r){return r[e]===t})),Da=(e,t)=>{const r=Ta()[t]&&Ta()[t][e];return r||null},Ra=(e,t,r)=>{const a=Pa(e,r),n=Da(t,a);return n||null},Na=e=>e.map((e=>{const t={};return Object.entries(e).forEach((([e,r])=>{const a=Ra("spreadsheet","csv",e);a&&(t[a]=r)})),t})),$a=(e,t)=>{const r=e.map((e=>e[t])),a=(0,bt.uniq)(r);return a},Ba=e=>{const t=$a(e,"criterion");return t},qa=(e,t)=>{const r=e.map((e=>[e["aim"],e["criterion"]])),a=(0,bt.sortBy)((0,bt.uniqBy)(r,Ma),(([e,t])=>e)),n={};return a.forEach(((e,r)=>{const a=e[0],l=za(t,e[1],"nameCriterion");r++,n[r]={id:r,name:a,criterion:l}})),n},Va=e=>{const t=$a(e,"stakeholder");return t},Ha=e=>{const t=$a(e,"property");return t},Ma=e=>e.join(":"),Ga=e=>{const t=e.map((e=>[e["property"],e["value"]])),r=(0,bt.uniqBy)(t,Ma);return r},Ua=e=>{const t={};return e.forEach(((e,r)=>{r++,t[r]={id:r,name:e}})),t},Qa=e=>{const t={};return e.forEach(((e,r)=>{r++,t[r]={id:r,...e,icon:"mdi-"+e.icon.replace(/\.[^/.]+$/,"").split(/(\\|\/)/g).pop()||0}})),t},za=(e,t,r)=>{const a=Object.values(e).find((e=>e.name===t));try{return a.id}catch(n){throw new ha("SPREADSHEET_ERROR",`Cannot find <b>${t}</b> in ${"nameAlternative"===r?"alternatives":`<b>${r}</b>`}`)}},Ka=(e,{criterions:t,aims:r,alternatives:a,stakeholders:n})=>e.map((e=>({...e,subOption:!0===JSON.parse(e.favorable.toString().toLowerCase())?1:2,criterion:za(t,e.criterion,"nameCriterion"),stakeholder:za(n,e.stakeholder,"nameStakeHolder"),aim:za(r,e.aim,"aim"),alternative:za(a,e.alternative,"nameAlternative"),isProspective:1===Number(e.isProspective)}))),Ja=(e,t)=>{const r=Ba(e),a=Va(e),n=t.alternatives,l=Ua(r.sort()),s=Qa(n),o=Ua(a.sort()),i=qa(e,l),c=Ka(e,{criterions:l,aims:i,alternatives:s,stakeholders:o});return{criterions:l,alternatives:s,stakeholders:o,aims:i,items:c}},Ya=(e,t)=>{const r=Ga(e),a=Ha(e),{criterions:n,alternatives:l,stakeholders:s,aims:o,items:i}=Ja(e,t),c={criterions:n,alternatives:l,stakeholders:s,labels:r,properties:a,aims:o,items:i,subOptions:{1:{id:1,name:"🙂"},2:{id:2,name:"🙁"}}};return c},Za=function(e){const t=(0,bt.groupBy)(e,"property"),r=Object.values(t).filter((e=>{const t=(0,bt.groupBy)(e,"aim");if(Object.keys(t).length>1)return e})),a=(0,bt.flatten)(r);return a},en=function(e){const t=(0,bt.groupBy)(e,"aim"),r=Object.values(t).filter((e=>{const t=(0,bt.groupBy)(e,"stakeholder");if(Object.keys(t).length>1)return e})),a=(0,bt.flatten)(r);return a},tn=(e,t)=>{const r=t.filter((t=>e.some((e=>e.nameCriterion===t.criterion&&e.nameStakeHolder===t.stakeholder))));return r},rn=(e,t)=>{const r=t.filter((t=>e.some((e=>e.nameTypeSource===t.sourceType&&1===Number(e.fiability)))));return r},an=e=>{const t=e.filter((e=>1===Number(e.isProspective)));return t},nn=e=>{const t=Za(e);return t},ln=e=>{const t=en(e);return t};var sn=r(7065);const on=(0,n.EW)((()=>b.fields.nextcloudUrl)),cn=e=>`https://icotest.iate.inra.fr/nextcloud/s/${e}/download`,un=async e=>{const t=e,r=await fetch(t),a=await r.blob(),n=pn(e),l=new File([a],n);return l},dn=async e=>{try{const t=await un(e),r=await gn(t);return r}catch(t){throw t}},pn=e=>{const t=new RegExp("https://icotest.iate.inra.fr/nextcloud/s/([a-zA-Z0-9-_]+)").exec(e);if(t){const e=t[1];return e}return e},mn=async(e,t)=>{try{const r=await gn(e);Cn(r.items,r.project,t)}catch(r){throw r}},hn=async(e,t)=>{await mn(e,t)},vn=async e=>{const t=await sn.onFileSelection(e);return t},fn=async e=>{const t=await vn(e),r=Object.entries(t).map((([e,t],r)=>({title:e,data:t,index:r})));return r},gn=async e=>{try{const t=await fn(e),r=await La(t),a=await Oa(t);return{items:r,project:a}}catch(t){throw t}},bn=async e=>{const t=Aa(e),r={query:{[aa]:t},name:"project",path:"/project"},a=Zr.resolve(r);await Zr.push(a),await ul(a)},yn=async e=>{const t={query:{[ra]:e},name:"project"},r=Zr.resolve(t);await Zr.push(r),await ul(r)},kn=async e=>{const t=pn(e),r={query:{[na]:t},name:"project",path:"/project"},a=Zr.resolve(r);await Zr.push(r),await ul(a)},En=async e=>{const[t,r]=await Promise.all([await Sn(e),await _n(e)]),a={project:t,items:r};return a},Sn=async e=>{try{let t=null;const r=await rl(e);return t=Wa(r),Promise.resolve(t)}catch(t){throw t}},_n=async e=>{try{let t=null;const r=await tl(e);return t=Xa(r),Promise.resolve(t)}catch(t){throw t}},Cn=(e,t,r)=>{!1!==r?E():(S(),y()),ca();try{let r;if("interplay"===b.mode){const a=nn(e),n=Ya(a,t);r=Object.freeze(n)}else if("prospective"===b.mode){const a=an(e),n=Ya(a,t);r=Object.freeze(n)}else if("data-reliability"===b.mode){const a=rn(t.sourceTypeEntities,e),n=Ya(a,t);r=Object.freeze(n)}else if("expertise"===b.mode){const a=tn(t.expertiseEntities,e),n=Ya(a,t);r=Object.freeze(n)}else if("multi-stakeholder"===b.mode){const a=ln(e),n=Ya(a,t);r=Object.freeze(n)}else{const a=Ya(e,t);r=Object.freeze(a)}b.data=r,b.project=t}catch(a){throw a}};var Fn;(function(e){e["ICO"]="ico",e["GOOGLE_SPREADSHEET"]="googlespreadsheet",e["NEXTCLOUD"]="nextcloud",e["XLSX"]="xlsx"})(Fn||(Fn={}));const wn={projects:{[Fn.ICO]:{},[Fn.GOOGLE_SPREADSHEET]:{},[Fn.NEXTCLOUD]:{},[Fn.XLSX]:{}}},xn="MYCHOICE_CACHE",In=()=>JSON.parse(localStorage.getItem(xn))||wn,Ln=()=>In()["projects"],On=(e,t)=>Object.values(Ln()[e]).find((e=>e.id===t)),jn=e=>{localStorage.setItem(xn,JSON.stringify(e))},An=e=>{const t=In(),r=(0,bt.merge)(t,e);jn(r)},Wn=e=>{const t=In(),r=(0,bt.omit)(t,e);jn(r)},Xn=(e,t)=>{An({projects:{[e]:{[t.id]:t}}})},Tn=(e,t)=>{Xn(e,t)},Pn=e=>Ln()[e],Dn=e=>{const t={};return Object.entries(e).filter((([e])=>e!==Fn.GOOGLE_SPREADSHEET&&e!==Fn.NEXTCLOUD)).forEach((([e,r])=>{Object.entries(r).forEach((([r,a])=>{const n=Vn(e,r);t[n]={...a,type:e}}))})),t},Rn=(0,n.EW)((()=>b.recentProjects)),Nn=(0,n.EW)((()=>!!Object.keys(Rn.value).length)),$n=()=>{b.recentProjects=Bn(Ln())},Bn=e=>{const t=Dn(e),r=Object.keys(t).sort(((e,r)=>t[r].date-t[e].date)).reduce(((e,r,a)=>(e[a]=t[r],e)),{}),a=Object.entries(r).map((([e,t])=>t));return a},qn=(e,{name:t,id:r})=>{if(void 0===r)return;const a=Object.keys(Pn(e)).includes(r);a?(t&&Xn(e,{name:t,id:r}),Xn(e,{date:Date.now(),id:r,type:e})):Xn(e,{name:t,id:r,date:Date.now(),type:e}),$n()},Vn=(e,t)=>`${e}-${t}`,Hn=(e,{id:t})=>{const r=b.recentProjects.some((r=>r.type===e&&r.id===t));r&&(Mn(e,t),$n())},Mn=(e,t)=>{Wn(`projects.${e}.${t}`)},Gn=(e,t)=>{Wn(`projects.${e}.${t}.data`)},Un=e=>{e.query[ta.ICO]&&Gn(Fn.ICO,e.query[ta.ICO]),e.query[ta.GOOGLE_SPREADSHEET]&&Gn(Fn.GOOGLE_SPREADSHEET,e.query[ta.GOOGLE_SPREADSHEET]),e.query[ta.NEXTCLOUD]&&Gn(Fn.NEXTCLOUD,e.query[ta.NEXTCLOUD]),e.query[ta.XLSX]&&Gn(Fn.XLSX,e.query[ta.XLSX])},Qn=e=>!!Jn(e),zn=e=>{const t=ll(e);return e.query[ta.GOOGLE_SPREADSHEET]?On(Fn.GOOGLE_SPREADSHEET,t):e.query[ta.ICO]?On(Fn.ICO,t):e.query[ta.NEXTCLOUD]?On(Fn.NEXTCLOUD,t):e.query[ta.XLSX]?On(Fn.XLSX,t):void 0},Kn=(e,t)=>{const r=ll(e);e.query[ta.GOOGLE_SPREADSHEET]&&Tn(Fn.GOOGLE_SPREADSHEET,{id:r,data:t}),e.query[ta.ICO]&&Tn(Fn.ICO,{id:r,data:t}),e.query[ta.NEXTCLOUD]&&Tn(Fn.NEXTCLOUD,{id:r,data:t}),e.query[ta.XLSX]&&Tn(Fn.XLSX,{id:r,data:t})},Jn=e=>{const{data:t}=zn(e);return t},Yn=e=>{b.recentProjectNames[e]&&(delete b.recentProjectNames[e],localStorage.recentProjectNames=JSON.stringify(b.recentProjectNames))},Zn=e=>{Hn(Fn.GOOGLE_SPREADSHEET,{id:e})},el=()=>"https://ico.iate.inra.fr/MyChoice/api/",tl=async e=>{let t=null;const r=el()+"arguments?project="+e;try{if(!e)throw Error();const a=await fetch(r);t=await a.json()}catch(a){throw console.warn("Fetch error, unable to fetch arguments: "+r),a}return t},rl=async e=>{let t=null;const r=el()+"project?name="+e;try{if(!e)throw Error();const a=await fetch(r);t=await a.json()}catch(a){throw console.warn("Fetch error, unable to fetch project:"+r),a}return t},al=e=>Object.prototype.hasOwnProperty.call(e.query,ta.GOOGLE_SPREADSHEET)?Fn.GOOGLE_SPREADSHEET:Object.prototype.hasOwnProperty.call(e.query,ta.ICO)?Fn.ICO:Object.prototype.hasOwnProperty.call(e.query,ta.XLSX)?Fn.XLSX:Object.prototype.hasOwnProperty.call(e.query,ta.NEXTCLOUD)?Fn.NEXTCLOUD:null,nl=e=>e===Fn.GOOGLE_SPREADSHEET?ta.GOOGLE_SPREADSHEET:e===Fn.ICO?ta.ICO:e===Fn.XLSX?ta.XLSX:e===Fn.NEXTCLOUD?ta.NEXTCLOUD:null,ll=e=>Object.prototype.hasOwnProperty.call(e.query,ta.GOOGLE_SPREADSHEET)?e.query[ta.GOOGLE_SPREADSHEET]:Object.prototype.hasOwnProperty.call(e.query,ta.ICO)?e.query[ta.ICO]:Object.prototype.hasOwnProperty.call(e.query,ta.XLSX)?e.query[ta.XLSX]:Object.prototype.hasOwnProperty.call(e.query,ta.NEXTCLOUD)?e.query[ta.NEXTCLOUD]:null,sl=async(e,t)=>{const r=ll(e);qn(Fn.GOOGLE_SPREADSHEET,{id:r});let a=null;Qn(e)?(a=Jn(e),b.notifications.push({message:"Spreadsheet loaded from cache"})):a=await ja(r),qn(Fn.GOOGLE_SPREADSHEET,{name:a.project&&a.project.name?a.project.name:void 0,id:r});try{Cn(a.items,a.project,t),Kn(e,a),b.spreadsheet=r}catch(n){throw n}},ol=async(e,t)=>{const r=ll(e);qn(Fn.ICO,{id:r});let a=null;Qn(e)?(a=Jn(e),b.notifications.push({message:"Ico project loaded from cache"})):a=await En(r),a.project&&a.project.name&&qn(Fn.ICO,{name:a.project.name?a.project.name:void 0,id:a.project.name});try{Cn(a.items,a.project,t),Kn(e,a)}catch(n){throw n}},il=async(e,t)=>{const r=ll(e);qn(Fn.NEXTCLOUD,{id:r});let a=null;if(Qn(e))a=Jn(e),b.notifications.push({message:"Nextcloud project loaded from cache"});else{const e=cn(r);a=await dn(e)}qn(Fn.NEXTCLOUD,{name:a.project&&a.project.name?a.project.name:void 0,id:r});try{Cn(a.items,a.project,t),Kn(e,a)}catch(n){throw n}},cl=({type:e,id:t})=>{const r=nl(e);if(!r)throw new Error("Route type is undefined for this project type.");const a={query:{[r]:t},name:"project",path:"/project",params:{},matched:[],fullPath:"/project",hash:"",redirectedFrom:void 0,meta:void 0},n=Zr.resolve(a).href;return n},ul=async(e,t)=>{j();try{if(al(e)===Fn.GOOGLE_SPREADSHEET&&await sl(e,t),al(e)===Fn.ICO&&await ol(e,t),al(e)===Fn.NEXTCLOUD&&await il(e,t),al(e)===Fn.XLSX){const e=g.value;if(e&&e.files&&e.files[0]){const r=e.files[0];await hn(r,t)}else console.error("No file selected or file input is not valid.")}A()}catch(r){throw A(),r instanceof ha?(console.warn(r.name,"MYCHOICE ERROR"),va(r.name,r.message),Error(r.stack)):(va(r.name,r.message),console.warn(r.stack,"stack"),r)}},dl=function(){return b.data.alternatives},pl=function(){const e=Object.keys(dl());return e.map((e=>Number(e)))},ml=function(){return Object.keys(dl()).map((e=>Number(e)))},hl=(0,n.EW)((()=>Object.keys(dl()).map((e=>Number(e))))),vl=function(e){return dl()[e]},fl=function(e){return vl(e).name},gl=function(){const e=b.data.aims;return e},bl=function(){return Object.keys(gl()).map((e=>Number(e)))},yl=function(){const e=Object.keys(gl());return e.map((e=>Number(e)))},kl=function(e){return gl()[e]},El=(e,t)=>{const r=Object.values(gl()).filter((r=>Number(r[e])===Number(t)));return r},Sl=function(e){return gl()[e]&&gl()[e].name},_l=()=>bl().filter((e=>Xl().some((t=>t.aim===e)))),Cl=e=>(0,bt.uniqBy)(e,"aim").map((e=>e.aim)),Fl=(e,t)=>e.filter((e=>kl(e).criterion===t)).length,wl=function(){const e=b.data.criterions;return e},xl=(0,n.EW)((()=>b.data.criterions)),Il=function(){return Object.keys(wl()).map((e=>Number(e)))},Ll=(0,n.EW)((()=>Object.keys(xl.value).map((e=>Number(e))))),Ol=function(e){return wl()[e]},jl=function(e){return wl()[Number(e)].name},Al=()=>Il().filter((e=>Xl().some((t=>t.criterion===e)))),Wl=((0,n.EW)((()=>Ll.value.filter((e=>Xl().some((t=>t.criterion===e)))))),function(){const e=b.data.items;return e}),Xl=function(){let e=Nl(Wl(),b.searchInput);return b.selectedAims.length&&(e=e.filter((e=>b.selectedAims.includes(e["aim"])))),b.selectedStakeholders.length&&(e=e.filter((e=>b.selectedStakeholders.includes(e["stakeholder"])))),b.selectedCriterions.length&&(e=e.filter((e=>b.selectedCriterions.includes(Number(gl()[e["aim"]].criterion))))),e},Tl=(e,t)=>{const r=Object.entries(t);return e.filter((e=>r.every((([t,r])=>e[t]===r))))},Pl=function(e){return e?Tl(Wl(),e):[]},Dl=function(e){return Object.values((0,bt.groupBy)(e,(({property:e,value:t,assertion:r,explanation:a,stakeholder:n})=>JSON.stringify({property:e,value:t,assertion:r,explanation:a,stakeholder:n}))))},Rl=function(e){return Tl(Xl(),e)},Nl=function(e,t){return e.filter((e=>Object.keys(e).some((r=>{if(["property","value"].includes(r)){const a=e[r];return a.toString().toLowerCase().includes(t.toString().toLowerCase())}}))))},$l=e=>{const t={},r=pl();return r.forEach((r=>{const a=e.filter((e=>e.alternative===r));t[r]=a})),t},Bl=e=>{const t={},r=yl();return r.forEach((r=>{const a=e.filter((e=>e.aim===r));t[r]=a})),t},ql=function(e,t=!0){const r={},a=t?Xl():Wl();return a.forEach((t=>{const a=t[e];r[a]?r[a].push(t):r[a]=[t]})),ya(r)},Vl=(e,t)=>(0,bt.groupBy)(Rl(e),t),Hl=function(){return b.data.subOptions},Ml=function(){return Object.keys(Hl()).map((e=>Number(e)))},Gl=function(e){return Hl()[e]},Ul=function(){const e=b.data.stakeholders;return e},Ql=function(){return Object.keys(Ul()).map((e=>Number(e)))},zl=function(e){return Ul()[e]&&Ul()[e].name},Kl=e=>{const t={};return Object.keys(e).sort().forEach((function(r){t[r]=e[r]})),JSON.stringify(t)},Jl=()=>b.selectedSupersets,Yl=function(e){b.selectedSuperset=Kl(e)},Zl=function(e){b.selectedSuperset=""},es=function(e){b.selectedSuperset===Kl(e)?Zl(e):Yl(e)},ts=function(e){as(e)||b.selectedSupersets.push(Kl(e))},rs=function(e){const t=Kl(e),r=Jl().indexOf(t);r>-1&&b.selectedSupersets.splice(r,1)},as=function(e){return Jl().find((t=>t===Kl(e)))},ns=e=>Math.round(100*e)/100,ls=(e,t=!0)=>{const r=Bl(e),a={},n={};return Object.entries(r).map((([e,t])=>{Number(e);const r=ss(t);Object.entries(r).forEach((([e,t])=>{const r=Number(e);(a[r]||(a[r]=[])).push(t)}))})),Object.entries(a).forEach((([r,a])=>{const l=os(a)/e.length,s=Number.isNaN(l)?null:t?ns(l):l;n[Number(r)]=s})),n},ss=e=>{const t=$l(e),r={};return Object.entries(t).forEach((([t,a])=>{const n=Number(t),l=a.filter((e=>1===e.subOption)),s=a.filter((e=>2===e.subOption)),o=l.length+1,i=(s.length,a.length+2),c=0===e.length,u=0===l.length&&0===s.length&&e.length>0;let d;d=c?0:u?.5:o/i;const p=d*e.length;r[n]=p})),r},os=e=>e.reduce(((e,t)=>e+t)),is=(e,t=!0)=>{if(0===e.length)return null;e.filter((e=>1===e.subOption));const r=e.filter((e=>2===e.subOption)),a=e.length-r.length,n=ga(a,0,e.length);return t?ns(n):n},cs=e=>null===e?"":1===e?"pro":0===e?"con":"mix",us=(e,t=!0)=>{const r=Xl(),a=$l(r),n=a[e];return is(n)},ds=(e,t)=>{const r=Tl(e,t).map((({property:e,value:t})=>({property:e,value:t})));return(0,bt.uniqBy)(r,(e=>[e.property,e.value].join(":")))},ps=e=>ds(Xl(),e),ms=function(){return Ql().map((e=>({text:zl(e),value:e})))},hs=function(){return bl().map((e=>({text:Sl(e),value:e})))},vs=function(){return Il().map((e=>({text:jl(e),value:e})))},fs=function(){return Object.entries(b.modes).map((([e,t])=>({text:t.name,value:e})))},gs=()=>{g.value?.click()},bs=e=>{e.preventDefault(),e.stopPropagation()},ys=e=>{bs(e),Fs(e)},ks=e=>{bs(e),ws(e)},Es=e=>{bs(e),Fs(e)},Ss=e=>{bs(e),ws(e);const t=e.dataTransfer.files;g.value.files=t,_s()},_s=async()=>{const e=g.value?.files?.[0],t=Zr.resolve(`/project?xlsx=${e.name}`);await ul(t),Zr.push(t)},Cs=((0,n.EW)((()=>g.value)),(0,n.EW)((()=>g.value?.files?.[0])),e=>"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e),Fs=e=>{e.currentTarget.classList.add("fileDropHighlight"),Cs(e.dataTransfer.items[0].type)||e.currentTarget.classList.add("fileDropHighlight--invalid")},ws=e=>{e.currentTarget.classList.remove("fileDropHighlight","fileDropHighlight--invalid")},xs=e=>{const t=document.querySelector("body");t.addEventListener("dragenter",ys,!1),t.addEventListener("dragleave",ks,!1),t.addEventListener("dragover",Es,!1),t.addEventListener("drop",Ss,!1)},{Parser:Is}=r(8992),Ls=e=>{const t={excelStrings:!1,delimiter:";",quote:'"',includeEmptyRows:!0,defaultValue:""};try{const r=new Is(t),a=r.parse(e);return a}catch(r){throw r}};var Os=r(4213);const js=()=>{const e=al(Zr.currentRoute.value);return e===Fn.GOOGLE_SPREADSHEET||e===Fn.XLSX||e===Fn.NEXTCLOUD},As=async e=>{const t=ll(e),r=al(e);if(r===Fn.GOOGLE_SPREADSHEET){const e=await Ca(t);await Ws(e)}if(r===Fn.NEXTCLOUD){const e=cn(t),r=await un(e),a=await fn(r);await Ws(a)}if(r===Fn.XLSX){const e=g.value;if(e?.files?.length){const t=e.files[0],r=await fn(t);await Ws(r)}else console.error("Aucun fichier XLSX sélectionné.")}},Ws=async e=>{const t=[],r={},a=["project","alternative","typesource","argument","hasexpertise"];e.forEach((e=>{let a=e.data;const n=a[0];if("parameters"===e.title||!n)return;const l=Object.keys(n).length-1;t.push(l),"argument"===e.title&&(a=Na(a));const s=Ls(a);r[e.title]=s}));const n=Math.max(...t),l=";".repeat(n),s=Object.entries(r).sort((([e],[t])=>a.indexOf(e)-a.indexOf(t))).reduce(((e,[t,r])=>({...e,[t]:r})),{}),o=Object.entries(s).map((([e,t])=>`"${e}"${l}\n${t}\n${l}`)).join("\n"),i=Xs(o);(0,Os.saveAs)(i,b.project.name+".csv")},Xs=e=>new Blob([e],{type:"text/csv;charset=utf-8;"}),Ts=async()=>{Un(Zr.currentRoute.value),await ul(Zr.currentRoute.value)};var Ps={data:()=>({state:b}),methods:{switchToView:ea,getSpreadsheetLink:I},computed:{isProjectRoute:function(){return this.$route.path.includes("/project")}}};const Ds=(0,Y.A)(Ps,[["render",h]]);var Rs=Ds;const Ns=["src"],$s={class:"pa-2"};function Bs(e,t,r,a,s,o){const i=(0,n.g2)("router-link"),c=(0,n.g2)("v-list-item-title"),u=(0,n.g2)("v-list-item"),d=(0,n.g2)("v-divider"),p=(0,n.g2)("v-icon"),m=(0,n.g2)("v-item-group"),h=(0,n.g2)("v-list-item-subtitle"),v=(0,n.g2)("v-list"),f=(0,n.g2)("v-list-subheader"),g=(0,n.g2)("v-card-subtitle"),b=(0,n.g2)("v-card"),y=(0,n.g2)("v-btn"),k=(0,n.g2)("Version"),E=(0,n.g2)("v-footer"),S=(0,n.g2)("v-navigation-drawer");return(0,n.uX)(),(0,n.Wv)(S,{modelValue:e.state.drawer,"onUpdate:modelValue":t[2]||(t[2]=t=>e.state.drawer=t),fixed:"",temporary:"","hide-overlay":""},{append:(0,n.k6)((()=>[(0,n.Lk)("div",$s,[(0,n.bF)(y,{block:"",color:"red",class:"white--text",onClick:e.refreshProject,disabled:!e.route.path.includes("project")},{default:(0,n.k6)((()=>[(0,n.bF)(p,{small:"",class:"mr-3"},{default:(0,n.k6)((()=>t[13]||(t[13]=[(0,n.eW)("mdi-autorenew")]))),_:1}),t[14]||(t[14]=(0,n.eW)(" Refresh project "))])),_:1},8,["onClick","disabled"])]),(0,n.bF)(v,{nav:"",dense:""},{default:(0,n.k6)((()=>[(0,n.bF)(m,null,{default:(0,n.k6)((()=>[(0,n.bF)(u,{onClick:t[1]||(t[1]=t=>e.state.aboutDialog=!0)},{default:(0,n.k6)((()=>[(0,n.bF)(c,null,{default:(0,n.k6)((()=>t[15]||(t[15]=[(0,n.eW)("About")]))),_:1})])),_:1})])),_:1})])),_:1}),(0,n.bF)(d),(0,n.bF)(E,{class:"flex-grow-1"},{default:(0,n.k6)((()=>[(0,n.bF)(k)])),_:1})])),default:(0,n.k6)((()=>[(0,n.bF)(u,null,{default:(0,n.k6)((()=>[(0,n.bF)(c,{class:"title"},{default:(0,n.k6)((()=>[(0,n.bF)(i,{to:"/"},{default:(0,n.k6)((()=>[(0,n.Lk)("img",{style:{padding:"2rem 0",width:"100%",margin:"auto"},src:e.state.baseUrl+"logo-mychoice-color.svg"},null,8,Ns)])),_:1})])),_:1})])),_:1}),(0,n.bF)(d),(0,n.bF)(v,{nav:"",dense:""},{default:(0,n.k6)((()=>[(0,n.bF)(m,null,{default:(0,n.k6)((()=>[(0,n.bF)(u,{onClick:e.handleLoadFile},{default:(0,n.k6)((()=>[(0,n.bF)(p,null,{default:(0,n.k6)((()=>t[3]||(t[3]=[(0,n.eW)("mdi-upload")]))),_:1}),(0,n.bF)(c,null,{default:(0,n.k6)((()=>t[4]||(t[4]=[(0,n.eW)("Open local project "),(0,n.Lk)("small",null,"(.xlsx)",-1)]))),_:1})])),_:1},8,["onClick"]),(0,n.bF)(u,{onClick:t[0]||(t[0]=t=>e.state.openDialog=!0)},{default:(0,n.k6)((()=>[(0,n.bF)(p,null,{default:(0,n.k6)((()=>t[5]||(t[5]=[(0,n.eW)("mdi-cloud-upload")]))),_:1}),(0,n.bF)(c,null,{default:(0,n.k6)((()=>t[6]||(t[6]=[(0,n.eW)("Open online project")]))),_:1})])),_:1})])),_:1}),(0,n.bF)(u,{href:"https://docs.google.com/spreadsheets/d/1Cj5tC6JyLQxCHdtZJ8d9_-FSV9UbHT7AGE3wrLEMlig/copy",target:"_blank"},{default:(0,n.k6)((()=>[(0,n.bF)(p,null,{default:(0,n.k6)((()=>t[7]||(t[7]=[(0,n.eW)("mdi-plus-circle-outline")]))),_:1}),(0,n.bF)(c,null,{default:(0,n.k6)((()=>t[8]||(t[8]=[(0,n.eW)("Create new project")]))),_:1}),(0,n.bF)(h,null,{default:(0,n.k6)((()=>t[9]||(t[9]=[(0,n.eW)("from spreadsheet template")]))),_:1})])),_:1})])),_:1}),(0,n.bF)(d),(0,n.bF)(f,null,{default:(0,n.k6)((()=>t[10]||(t[10]=[(0,n.eW)("Recent projects")]))),_:1}),e.hasRecentProjects?((0,n.uX)(),(0,n.Wv)(v,{key:1,subheader:"",nav:"",dense:""},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.recentProjects,((r,a)=>((0,n.uX)(),(0,n.Wv)(u,{key:a,to:e.getHrefFromTypeId({type:r.type,id:r.id})},{default:(0,n.k6)((()=>[(0,n.bF)(c,null,{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(r.name||r.id),1)])),_:2},1024),"googlespreadsheet"===r.type?((0,n.uX)(),(0,n.Wv)(p,{key:0},{default:(0,n.k6)((()=>t[12]||(t[12]=[(0,n.eW)("mdi-google-spreadsheet")]))),_:1})):(0,n.Q3)("",!0)])),_:2},1032,["to"])))),128))])),_:1})):((0,n.uX)(),(0,n.Wv)(b,{key:0,disabled:"",flat:"",tile:""},{default:(0,n.k6)((()=>[(0,n.bF)(g,null,{default:(0,n.k6)((()=>t[11]||(t[11]=[(0,n.eW)("No recent projects")]))),_:1})])),_:1}))])),_:1},8,["modelValue"])}var qs=(0,n.pM)({components:{Version:pe},setup(){const e=(0,P.lq)();return{state:b,route:e,recentProjects:Rn,hasRecentProjects:Nn,getHrefFromTypeId:cl,handleLoadFile:gs,isExportableToCSV:js,openIco:yn,openSpreadsheet:bn,getImagePath:C,exportToCSV:As,refreshProject:Ts}}});const Vs=(0,Y.A)(qs,[["render",Bs]]);var Hs=Vs;function Ms(e,t,r,s,o,i){const c=(0,n.g2)("v-list-item-title"),u=(0,n.g2)("v-spacer"),d=(0,n.g2)("v-icon"),p=(0,n.g2)("v-btn"),m=(0,n.g2)("v-list-item-action"),h=(0,n.g2)("v-list-item"),v=(0,n.g2)("v-combobox"),f=(0,n.g2)("v-form"),g=(0,n.g2)("v-col"),b=(0,n.g2)("v-row");return(0,n.uX)(),(0,n.Wv)(b,null,{default:(0,n.k6)((()=>[(0,n.bF)(g,null,{default:(0,n.k6)((()=>[t[4]||(t[4]=(0,n.Lk)("h3",null,"From INRAE's server",-1)),(0,n.bF)(b,null,{default:(0,n.k6)((()=>[(0,n.bF)(g,{cols:"12",class:""},{default:(0,n.k6)((()=>[(0,n.bF)(f,{onSubmit:t[1]||(t[1]=(0,a.D$)((t=>{e.handleOpenIco(e.state.fields.projectName),e.state.openDialog=!1}),["prevent"]))},{default:(0,n.k6)((()=>[(0,n.bF)(v,{items:e.recentIcoProjects.map((([e,t])=>({text:t.name,value:t}))),"item-text":"text","item-value":"value",label:"Project name",id:"comboprojectname",autocomplete:"off","search-input":e.state.fields.projectName,outlined:""},{item:(0,n.k6)((({index:r,item:s})=>[(0,n.bF)(h,{to:e.getHrefFromTypeId({type:s.value.type,id:s.value.id})},{default:(0,n.k6)((()=>[(0,n.bF)(c,null,{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(s.text),1)])),_:2},1024),(0,n.bF)(u),(0,n.bF)(m,{onClick:t[0]||(t[0]=(0,a.D$)((()=>{}),["stop"]))},{default:(0,n.k6)((()=>[(0,n.bF)(p,{icon:"",onClick:(0,a.D$)((t=>e.removeFromRecentProjects(s.value.type,{id:s.value.id})),["stop","prevent"])},{default:(0,n.k6)((()=>[(0,n.bF)(d,null,{default:(0,n.k6)((()=>t[2]||(t[2]=[(0,n.eW)("mdi-close")]))),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["to"])])),_:1},8,["items","search-input"]),(0,n.bF)(p,{class:"ml-auto d-flex",color:"secondary",disabled:!e.state.fields.projectName,type:"submit"},{default:(0,n.k6)((()=>t[3]||(t[3]=[(0,n.eW)("Open from Ico")]))),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var Gs=(0,n.pM)({setup(){const e=async function(e){await yn(e),b.fields.projectName=""},t=async function(e){await bn(e),b.fields.spreadsheetUrl=""},r=async function(e){await kn(e),b.fields.nextcloudUrl=""},a=(0,n.EW)((()=>b.fields.spreadsheetUrl?Aa(b.fields.spreadsheetUrl):""));return{state:b,isValidNextcloudUrl:on,spreadsheetId:a,openNextcloudUrl:kn,removeFromRecentProjectSpreadsheets:Zn,removeFromRecentProjectNames:Yn,handleOpenIco:e,handleOpenSpreadsheet:t,handleOpenNextcloudUrl:r,recentSpreadsheetProjects:W,recentNextcloudProjects:T,recentIcoProjects:X,removeFromRecentProjects:Hn,getHrefFromTypeId:cl}}});const Us=(0,Y.A)(Gs,[["render",Ms]]);var Qs=Us;const zs=["href"],Ks=["href"];function Js(e,t,r,a,l,s){const o=(0,n.g2)("v-card-title"),i=(0,n.g2)("v-card-text"),c=(0,n.g2)("v-divider"),u=(0,n.g2)("v-card-subtitle"),d=(0,n.g2)("v-col"),p=(0,n.g2)("v-row"),m=(0,n.g2)("v-card");return(0,n.uX)(),(0,n.Wv)(m,{class:"text-center"},{default:(0,n.k6)((()=>[(0,n.bF)(o,{class:"justify-center"},{default:(0,n.k6)((()=>t[0]||(t[0]=[(0,n.eW)("About MyChoice")]))),_:1}),(0,n.bF)(i,null,{default:(0,n.k6)((()=>t[1]||(t[1]=[(0,n.Lk)("b",null,"MyChoice",-1),(0,n.eW)(" is a web application supporting collective decision, designed by INRAE. ")]))),_:1}),(0,n.bF)(i,null,{default:(0,n.k6)((()=>[(0,n.Lk)("div",null,[(0,n.bF)(c,{class:"my-2"}),(0,n.bF)(u,{class:"p-0"},{default:(0,n.k6)((()=>t[2]||(t[2]=[(0,n.eW)("Scientific contacts")]))),_:1}),(0,n.bF)(p,null,{default:(0,n.k6)((()=>[(0,n.bF)(d,null,{default:(0,n.k6)((()=>t[3]||(t[3]=[(0,n.Lk)("b",null,[(0,n.Lk)("a",{href:"mailto:rallou.thomopoulos@inrae.fr"},"Rallou Thomopoulos")],-1),(0,n.Lk)("br",null,null,-1),(0,n.Lk)("small",null,"INRAE (IATE lab) / INRIA (GraphIK lab)",-1)]))),_:1}),(0,n.bF)(d,null,{default:(0,n.k6)((()=>t[4]||(t[4]=[(0,n.Lk)("b",null,[(0,n.Lk)("a",{href:"mailto:julien.cufi@inrae.fr"},"Julien Cufi")],-1),(0,n.Lk)("br",null,null,-1),(0,n.Lk)("small",null,"INRAE (IATE lab)",-1)]))),_:1})])),_:1}),(0,n.bF)(c,{class:"my-2"}),(0,n.bF)(u,null,{default:(0,n.k6)((()=>t[5]||(t[5]=[(0,n.eW)("UX & front-end development")]))),_:1}),(0,n.bF)(p,null,{default:(0,n.k6)((()=>[(0,n.bF)(d,null,{default:(0,n.k6)((()=>t[6]||(t[6]=[(0,n.Lk)("b",null,[(0,n.Lk)("a",{href:"https://maximelebreton.com",target:"_blank"},"Maxime Le Breton")],-1),(0,n.Lk)("br",null,null,-1),(0,n.Lk)("small",null,"Independent designer & front-end developer",-1)]))),_:1})])),_:1}),(0,n.bF)(c,{class:"my-2"}),(0,n.bF)(u,null,{default:(0,n.k6)((()=>t[7]||(t[7]=[(0,n.eW)("Other contributors")]))),_:1}),(0,n.bF)(p,null,{default:(0,n.k6)((()=>[(0,n.bF)(d,null,{default:(0,n.k6)((()=>t[8]||(t[8]=[(0,n.Lk)("b",null," Thomas Bosch ",-1),(0,n.Lk)("br",null,null,-1),(0,n.Lk)("small",null,"Former student at IATE lab",-1)]))),_:1})])),_:1}),(0,n.bF)(c,{class:"my-2"}),(0,n.bF)(p,null,{default:(0,n.k6)((()=>[(0,n.bF)(d,null,{default:(0,n.k6)((()=>[(0,n.Lk)("a",{href:e.state.baseUrl+"licenses.txt",target:"_blank"},"Open source licenses",8,zs)])),_:1}),(0,n.bF)(d,null,{default:(0,n.k6)((()=>[(0,n.Lk)("a",{href:e.state.baseUrl+"Open_source_license_terms.pdf",target:"_blank"},"Open source licenses terms",8,Ks)])),_:1})])),_:1})])])),_:1})])),_:1})}var Ys={data:()=>({state:b})};const Zs=(0,Y.A)(Ys,[["render",Js]]);var eo=Zs,to=(0,n.pM)({name:"App",components:{Drawer:Hs,OpenDialog:Qs,AppBar:Rs,About:eo},setup(){(0,n.sV)((()=>{xs()}));const e=(0,n.EW)({get(){return b.notifications&&b.notifications.length>0},set(e){e||(b.notifications=[])}}),t=(0,n.EW)({get(){return Object.values(b.errors).some((e=>!1!==e))},set(e){e||ca()}});return{dropFileInputRef:g,onFileChange:_s,onFileDrop:Ss,onFileDragEnter:ys,onFileDragLeave:ks,onFileDragOver:Es,clearErrors:ca,getErrorMessage:ia,refreshProject:Ts,state:b,getErrors:oa,notifications:sa,isNotification:e,isError:t}}});const ro=(0,Y.A)(to,[["render",i]]);var ao=ro,no=(r(5524),r(3925)),lo=r(9547),so=r(9693),oo=r(3051),io=r(9293),co=r(8741),uo=r(8210),po=r(2034),mo=r(5526),ho=r(4789),vo=r(365),fo=r(8400),go=r(5939),bo=r(4810),yo=r(6832),ko=r(1541),Eo=r(3679),So=r(4146),_o=r(9321),Co=r(5286),Fo=r(9416),wo=r(6843),xo=r(6838),Io=r(2940),Lo=r(2281),Oo=r(857),jo=r(4629),Ao=r(1539),Wo=r(8591),Xo=r(9283),To=r(7789),Po=r(1529),Do=r(9468),Ro=r(6731),No=r(6992),$o=r(3495),Bo=r(3548),qo=r(3714),Vo=r(9271),Ho=r(5634),Mo=r(802),Go=r(7609),Uo=r(7163),Qo=r(2049),zo=r(9064),Ko=r(6526);const Jo=(0,no.$N)({components:{VApp:lo.E,VAppBar:so.z,VNavigationDrawer:oo.e,VList:io.x8,VListItem:co.g,VListItemTitle:uo.U,VListItemSubtitle:po.w,VDivider:mo.G,VBtn:ho.D,VIcon:vo.w,VCard:fo.J,VCardTitle:go.r,VCardText:bo.O,VDialog:yo.p,VMain:ko.Y,VItemGroup:Eo.$V,VListSubheader:So.w,VOverlay:_o.L,VProgressCircular:Co.x,VSnackbar:Fo.K,VFooter:wo.O,VContainer:xo.I,VListItemAction:Io.k,VSpacer:Lo.h,VCardSubtitle:Oo.Z,VRow:jo.L,VCol:Ao.B,VToolbarTitle:Wo.s,VTooltip:Xo.y,VAppBarNavIcon:To.Z,VForm:Po.n,VCombobox:Do.A,VImg:Ro.y,VAvatar:No.y,VChip:$o.x,VBadge:Bo.Q,VExpandTransition:qo.Qo,VMenu:Vo.q,VBtnToggle:Ho.H_,VToolbar:Mo.u,VAutocomplete:Go.V,VTextField:Uo.W,VSelect:Qo.d4},directives:zo,icons:{defaultSet:"mdi",aliases:Ko.z,sets:{mdi:Ko.r}}});var Yo=Jo,Zo=r(5727),ei={install(e){e.component("TextHighlight",Zo.Ay)}};const ti=async()=>{$n()};(async()=>{await ti();const e=(0,a.Ef)(ao);e.use(Zr),e.use(Yo),e.use(ei),e.mount("#app")})()},6251:function(){},7233:function(){},9800:function(){}},t={};function r(a){var n=t[a];if(void 0!==n)return n.exports;var l=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(l.exports,l,l.exports,r),l.loaded=!0,l.exports}r.m=e,function(){var e=[];r.O=function(t,a,n,l){if(!a){var s=1/0;for(u=0;u<e.length;u++){a=e[u][0],n=e[u][1],l=e[u][2];for(var o=!0,i=0;i<a.length;i++)(!1&l||s>=l)&&Object.keys(r.O).every((function(e){return r.O[e](a[i])}))?a.splice(i--,1):(o=!1,l<s&&(s=l));if(o){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[a,n,l]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};r.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,l,s=a[0],o=a[1],i=a[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(n in o)r.o(o,n)&&(r.m[n]=o[n]);if(i)var u=i(r)}for(t&&t(a);c<s.length;c++)l=s[c],r.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return r.O(u)},a=self["webpackChunkmy_choice"]=self["webpackChunkmy_choice"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=r.O(void 0,[504],(function(){return r(5614)}));a=r.O(a)})();
//# sourceMappingURL=app.3193dd6b.js.map